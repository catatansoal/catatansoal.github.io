<!DOCTYPE html>
<html lang="en">
<head>
	<title>Shell Script Logging: Catch STDERR With Timestamps</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Shell Script Logging: Catch STDERR With Timestamps...">
    <link rel="canonical" href="https://catatansoal.github.io/blog/shell-script-logging-catch-stderr">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Shell Script Logging: Catch STDERR With Timestamps">
	<meta property="og:description" content="Shell Script Logging: Catch STDERR With Timestamps...">
	<meta property="og:url" content="https://catatansoal.github.io/blog/shell-script-logging-catch-stderr">
	<meta property="og:site_name" content="Question Notes">
	<meta property="article:published_time" content="2025-08-10T04:05:41+00:00">
	<meta property="article:author" content="ADMIN">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js">
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <link rel="preload" fetchpriority="high" as="image" href="https://tse4.mm.bing.net/th?q=Logging%20with%20Shell%20Script%3A%20Catching%20STDERR%20and%20Adding%20Timestamps">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style type="text/css">
    	:root{--primary-color:#3740ff;--text-color:#202124;--background-color:#ffffff;--gray-100:#f8f9fa;--gray-200:#e9ecef}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6;color:var(--text-color);background-color:var(--background-color)}.container{max-width:1200px;margin:0 auto;padding:0 1.5rem}.header{background-color:var(--background-color);border-bottom:1px solid var(--gray-200);position:sticky;top:0;z-index:100}.nav{padding:.5rem 0}.nav-container{display:flex;justify-content:space-between;align-items:center;gap:1rem}.nav-left{display:flex;align-items:center;flex-shrink:0}.logo{font-weight:700;color:var(--primary-color)}.blog-tag{margin-left:1rem;padding:.25rem .5rem;background-color:var(--gray-100);border-radius:4px;font-size:.875rem}.nav-search{flex-grow:1;max-width:300px}.search-form{position:relative;width:100%}.search-input{width:100%;padding:.5rem 2.5rem .5rem 1rem;border:1px solid var(--gray-200);border-radius:24px;font-size:.875rem;transition:all 0.2s}.search-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgb(55 64 255 / .1)}.search-button{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#5f6368;cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center}.search-button:hover{color:var(--primary-color)}.nav-toggle{display:none;background:none;border:none;cursor:pointer;padding:.5rem}.hamburger{display:block;position:relative;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before,.hamburger::after{content:'';position:absolute;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before{top:-6px}.hamburger::after{bottom:-6px}.nav-toggle-active .hamburger{background:#fff0}.nav-toggle-active .hamburger::before{transform:rotate(45deg);top:0}.nav-toggle-active .hamburger::after{transform:rotate(-45deg);bottom:0}.nav-list{display:flex;list-style:none;gap:2rem}.nav-link{color:var(--text-color);text-decoration:none;font-size:.9rem;transition:color 0.2s}.nav-link:hover{color:var(--primary-color)}.article-header{padding:2rem 0;background-color:var(--gray-100)}.article-layout{display:grid;grid-template-columns:1fr 350px;gap:3rem;padding:1rem 0;align-items: start}h1,h2,h3,h4,h5,h6{font-family:"Crimson Text","Times New Roman",Times,serif}h1{font-size:2.5rem;line-height:1.2;margin-bottom:1rem}.meta{color:#5f6368;font-size:.875rem;display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.view-count{display:inline-flex;align-items:center;gap:.25rem}.view-count svg{color:#5f6368}.content{min-width:0;border-bottom:1px solid #dddddd5e;margin-top:1rem;white-space:pre-line !important;overflow-wrap:break-word;overflow-x:auto;word-break:break-word}.lead{font-size:1.25rem;color:#5f6368;margin-bottom:2rem}h2,h3,h4,h5,h6{font-size:1.75rem;margin:1rem 0 1rem}p,pre,ol,ul>li{margin-bottom:1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;font-size:1.3rem;text-align: justify;}p>code{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px}hr{margin:1rem 0 1rem 0}.code-example{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;margin:1.5rem 0;overflow-x:auto}code{font-family:'Roboto Mono',monospace;font-size:.875rem}ul{margin:.2rem 0;padding-left:1.5rem}.related-posts{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;position:sticky;top:5rem}.related-posts-title,.newpost-posts-list{font-size:1.75rem;margin:0 0 1rem}.related-posts-list{display:flex;flex-direction:column;gap:.5rem}.related-post,.newpost-post{border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:10px}.related-post:last-child,.newpost-post:last-child{padding-bottom:0;border-bottom:none}.related-post-title,.newpost-post-title{font-size:1.2rem;margin:0 0 .1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;display: -webkit-box;-webkit-line-clamp: 3;-webkit-box-orient: vertical;overflow: hidden;}.related-post-title a,.newpost-post-title a{color:var(--text-color);text-decoration:none;transition:color 0.2s}.related-post-title a:hover,.newpost-post-title a:hover{color:var(--primary-color)}.related-post time{font-size:.875rem;color:#5f6368}.footer{background-color:var(--gray-100);padding:2rem 0;margin-top:4rem;color:#5f6368;font-size:.875rem}.nav-menu>ul>li{margin-bottom:0}@media (max-width:1024px){.container{max-width:800px}.article-layout{grid-template-columns:1fr;gap:2rem}.related-posts{position:static}}@media (max-width:768px){.nav-container{flex-wrap:wrap}.nav-search{order:3;max-width:none;width:100%;margin-top:.1rem}.nav-toggle{display:block}.nav-menu{display:none;position:absolute;top:100%;left:0;right:0;background:var(--background-color);padding:1rem 0;border-bottom:1px solid var(--gray-200)}.nav-menu-active{display:block}.nav-list{flex-direction:column;gap:.1rem;padding:0 1.5rem}.nav-link{display:block;padding:.2rem 0}h1{font-size:2rem}.article-header{padding:2rem 0}.content{padding:.1rem 0}}table{width:100%;border-collapse:collapse;margin:20px 0;font-family:'Arial',sans-serif}th,td{padding:12px 15px;text-align:left;border:1px solid #ddd}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9}tr:nth-child(even) td{background-color:#f2f2f2}@media screen and (max-width:768px){table{border:0;display:block;overflow-x:auto;white-space:nowrap}th,td{padding:10px;text-align:right}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9;border-bottom:1px solid #ddd}tr:nth-child(even) td{background-color:#f2f2f2}}a{text-decoration:none;color:#540707}.katex-html{padding: .2rem;color: #000;font-weight: 700;font-size: 1.3rem;overflow-wrap: break-word;max-width: 100%;white-space: normal !important}.category{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;margin:1rem 0 1rem 0}.tag{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px;font-family:"Newsreader",serif}.tag>a{text-decoration:none;color:#000}img{margin:auto;display:block;max-width:100%;height:auto;margin-bottom:1rem}.katex{white-space: pre-line !important;display: inline-block;max-width: 100%;overflow-x: auto;overflow-y: hidden;scrollbar-width: thin;overflow-wrap: break-word;word-break: break-word;vertical-align: -7px}.content > p {overflow-wrap: break-word;word-break: break-word}
    </style>
    <style type="text/css">
    	pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}
		.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}
    	pre{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;font-weight:400;word-break:break-word;word-wrap:break-word;box-sizing:inherit;border-radius:4px;overflow-x:auto;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}code{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;word-wrap:break-word;word-break:break-word;font-style:normal;line-height:20px;letter-spacing:-.003em;box-sizing:inherit;font-weight:400;font-size:75%;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}
    </style>
    <style type="text/css">
    	.back-to-top{position:fixed;bottom:20px;right:20px;background-color:#a73f3f;color:#fff;padding:8px 10px;border-radius:50%;box-shadow:0 4px 6px rgb(0 0 0 / .2);font-size:10px;font-weight:700;text-decoration:none;text-align:center;transition:opacity 0.3s ease,visibility 0.3s ease;z-index:99999;opacity:1;visibility:visible}.back-to-top:hover{background-color:#0056b3}
    </style>
    <style type="text/css">
        .ad-header {margin: 1rem auto 1rem;background-color: #fdfdfd;text-align: center;display: block;}.ad-header .ad-wrapper {min-height: 90px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #555;font-weight: 500;padding: 3rem;border: 1px dashed #ccc;border-radius: 6px;}@media (max-width: 768px) {.ad-header {padding: 0.75rem;}}.ad-sidebar {margin: 0 0 1rem;background-color: #fefefe;text-align: center;padding: 0px;width: 100%;max-width: 100%;display: block;}.ad-sidebar .ad-wrapper {min-height: 250px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #444;font-weight: 500;border: 1px dashed #aaa;border-radius: 6px;padding: 0rem;}@media (max-width: 1024px) {.ad-sidebar {padding: 0.75rem;}}
    </style>
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "Article",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://catatansoal.github.io/blog/shell-script-logging-catch-stderr"
          },
          "headline": "Shell Script Logging: Catch STDERR With Timestamps",
          "description": "Shell Script Logging: Catch STDERR With Timestamps...",
          "image": [
            "https://tse4.mm.bing.net/th?q=Logging%20with%20Shell%20Script%3A%20Catching%20STDERR%20and%20Adding%20Timestamps"
          ],
          "author": {
            "@type": "Person",
            "name": "ADMIN",
            "jobTitle": "Editor web"
          },
          "publisher": {
            "@type": "Organization",
            "name": "Question Notes",
            "logo": {
              "@type": "ImageObject",
              "url": "https://tse4.mm.bing.net/th?q=Question%20Notes"
            }
          },
          "datePublished": "2025-08-10T04:05:41+00:00",
          "dateModified": "2025-08-10T04:05:41+00:00"
        }
    </script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container nav-container">
                <div class="nav-left">
                    <span class="logo">Question Notes</span>
                    <span class="blog-tag">Article</span>
                </div>
                <div class="nav-search">
                    <form class="search-form" role="search">
                        <input 
                            type="search" 
                            class="search-input"
                            placeholder="Search articles..."
                            aria-label="Search articles"
                        >
                        <button type="submit" class="search-button" aria-label="Submit search">ðŸ”Ž</button>
                    </form>
                </div>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <span class="hamburger"></span>
                </button>
                <div class="nav-menu">
                    <ul class="nav-list">
                    	<li><a href="/" class="nav-link">HOME</a></li>
                        <li><a href="/pages/About" class="nav-link">About</a></li>
                        <li><a href="/pages/Contact" class="nav-link">Contact</a></li>
                        <li><a href="/pages/Disclaimer" class="nav-link">Disclaimer</a></li>
                        <li><a href="/pages/Privacy" class="nav-link">Privacy</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="main">
        <article class="article">
            <header class="article-header">
                <div class="container">
                    <h1>Shell Script Logging: Catch STDERR With Timestamps</h1>
                    <div class="meta">
                        <time datetime="2025-08-10T04:05:41+00:00">Aug 10, 2025</time>
                        <span class="author">by ADMIN</span>
                        <span class="view-count">
                            <span id="viewCount">51</span> views
                        </span>
                    </div>
                </div>
            </header>
            <div class="ad-header container">
                <!-- <div class="ad-wrapper">
    Iklan Headers
</div> -->
            </div>
            <div class="container">
                <div class="article-layout">
                    <div class="content">
                        <img src="https://tse4.mm.bing.net/th?q=Logging%20with%20Shell%20Script%3A%20Catching%20STDERR%20and%20Adding%20Timestamps" title="Logging with Shell Script: Catching STDERR and Adding Timestamps" width="300" height="200"/><p>Hey everyone, are you ready to dive into the world of shell scripting and logging? I know, I know, it might not sound like the most exciting topic, but trust me, it's super useful. Especially when you're trying to debug those pesky scripts or just keep track of what's going on. We're going to talk about how to catch <code>STDERR</code> (standard error) and add those oh-so-handy timestamps to your logs. Because, let's be honest, who doesn't love knowing exactly <em>when</em> something went wrong?</p>
<h2>Why Logging in Shell Scripts Matters</h2>
<p>First off, why bother with logging in the first place? Well, imagine you're running a script that does a bunch of stuff â€“ maybe it's backing up your files, deploying code, or even just automating some tedious tasks. Now, things <em>will</em> go wrong. It's just a fact of life, especially in the world of coding. When your script hits a snag, you need to figure out what happened and when. That's where logging comes in. Logging gives you a record of what your script was doing, along with any errors or important information. This is especially crucial when you're not around to watch the script run, or when you need to troubleshoot problems later. Think of it as leaving breadcrumbs so you can retrace your steps.</p>
<h3>The Perks of Effective Logging</h3>
<ul>
<li><em><strong>Debugging Made Easier</strong></em>: When something breaks, logs are your best friends. They provide clues about the state of your script at various points and can help you pinpoint the source of errors.</li>
<li><em><strong>Monitoring and Alerting</strong></em>: With good logs, you can monitor your scripts for unexpected behavior and set up alerts to notify you of critical issues.</li>
<li><em><strong>Auditing</strong></em>: Logs can serve as an audit trail, showing you what actions your script took and when. This can be important for security or compliance reasons.</li>
<li><em><strong>Automation Validation</strong></em>: Ensures that your automation scripts are working as expected, helping you to avoid any potential issues in the future.</li>
</ul>
<h3>Common Logging Challenges</h3>
<ul>
<li><em><strong>Missing Information</strong></em>: Without proper logging, you might miss crucial error messages or important details.</li>
<li><em><strong>Manual Effort</strong></em>: Manually adding log statements can be time-consuming and error-prone.</li>
<li><em><strong>Log File Management</strong></em>: Managing log files (rotating, archiving, etc.) can be a headache if you don't have a good system in place.</li>
</ul>
<h2>Grabbing STDERR with Style</h2>
<p>Okay, so you know why logging is important. Let's talk about how to do it. The standard error stream (STDERR) is where your script sends error messages. By default, these messages usually appear on your terminal. However, if you want to capture them in your logs, you'll need to redirect them. This is where things get a little bit fancy, but don't worry, it's not rocket science.</p>
<h3>Redirecting STDERR to a Log File</h3>
<p>The most basic way to redirect STDERR is to use the <code>2&gt;</code> redirection operator. The <code>2</code> represents the file descriptor for STDERR. Here's how it works:</p>
<pre><code class="hljs">./my_script.sh 2&gt; error.log
</code></pre>
<p>In this example, any error messages from <code>my_script.sh</code> will be written to the <code>error.log</code> file. This is a simple and effective way to capture errors, but it doesn't give you much context. What if you want to add timestamps to your error messages?</p>
<h3>Adding Timestamps to Your Logs</h3>
<p>Timestamps are incredibly useful. They let you know <em>when</em> an error occurred, which can be invaluable when you're trying to figure out what went wrong. Let's modify our previous example to add timestamps:</p>
<pre><code class="hljs">#!/bin/bash

# Log file
LOG_FILE=&quot;error.log&quot;

# Function to log messages with timestamps
log_error() {
  local timestamp=$(date &#39;+%Y-%m-%d %H:%M:%S&#39;)
  echo &quot;$timestamp ERROR: $1&quot; &gt;&gt; &quot;$LOG_FILE&quot;
}

# Redirect STDERR to our logging function
exec 2&gt;&amp;1

# Example: Generate an error
echo &quot;This is a regular message.&quot;  

# Example: Generate an error
echo &quot;This is a regular message.&quot; 1&gt;&amp;2


# Simulate an error
if ! ls /nonexistent/path &gt; /dev/null 2&gt;&amp;1
then
  log_error &quot;Failed to list directory /nonexistent/path&quot;
fi
</code></pre>
<p>In this improved version, we define a <code>log_error</code> function that takes the error message as an argument, gets the current date and time, and writes the timestamp and error message to the log file. We then redirect STDERR to the function by using <code>2&gt;&amp;1</code>, which means it combines standard error with standard output and sends it all to our logging function, including timestamps.</p>
<h2>Advanced Logging Techniques: Beyond the Basics</h2>
<p>Alright, now that we've covered the fundamentals, let's level up our logging game with some more advanced techniques. We will explore some ways to make your logs more informative, manageable, and easier to analyze.</p>
<h3>Log Levels for Granular Control</h3>
<p>One of the cool things you can do is categorize your log messages by importance. This means you can have different log levels, such as <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, and <code>DEBUG</code>. This is super useful because it allows you to filter your logs based on the level of detail you need. For example, when you're troubleshooting, you might want to see all <code>DEBUG</code> messages, but in a production environment, you might only want to see <code>ERROR</code> and <code>WARNING</code> messages. Here's how you could modify your script to include log levels:</p>
<pre><code class="hljs">#!/bin/bash

# Log file
LOG_FILE=&quot;app.log&quot;

# Log levels
LOG_INFO=1
LOG_WARNING=2
LOG_ERROR=3
LOG_DEBUG=4

# Set the desired log level
LOG_LEVEL=$LOG_DEBUG

# Function to log messages
log() {
  local timestamp=$(date &#39;+%Y-%m-%d %H:%M:%S&#39;)
  local level=$1
  shift
  local message=&quot;$@&quot;

  if [[ $LOG_LEVEL -ge $level ]]; then
    case $level in
      $LOG_INFO)    LEVEL_STR=&quot;INFO&quot;    ;;
      $LOG_WARNING) LEVEL_STR=&quot;WARNING&quot; ;;
      $LOG_ERROR)   LEVEL_STR=&quot;ERROR&quot;   ;;
      $LOG_DEBUG)   LEVEL_STR=&quot;DEBUG&quot;   ;;
      *)            LEVEL_STR=&quot;UNKNOWN&quot; ;;
    esac
    echo &quot;$timestamp $LEVEL_STR: $message&quot; &gt;&gt; &quot;$LOG_FILE&quot;
  fi
}

# Example Usage
log $LOG_INFO &quot;Script started&quot;

# Simulate an error
if ! ls /nonexistent/path &gt; /dev/null 2&gt;&amp;1
then
  log $LOG_ERROR &quot;Failed to list directory /nonexistent/path&quot;
fi

log $LOG_DEBUG &quot;Debugging information here&quot;
log $LOG_WARNING &quot;This is a warning message&quot;
</code></pre>
<p>In this updated example, we define log levels as numeric constants. The <code>log</code> function takes a log level and a message as arguments, formats the output, and writes it to the log file. The <code>LOG_LEVEL</code> variable controls which messages are logged, so you can easily adjust the verbosity of your logs.</p>
<h3>Log Rotation and Management</h3>
<p>One of the things you'll quickly learn about logs is that they can grow very, very quickly. To prevent your log files from taking over your disk space and to make them easier to manage, you'll want to implement log rotation. Log rotation is the process of periodically archiving old log files and creating new ones. There are several tools that can help you with this, but <code>logrotate</code> is a popular choice on Linux systems.</p>
<p>To set up log rotation with <code>logrotate</code>, you typically create a configuration file (e.g., <code>/etc/logrotate.d/my_script</code>) that specifies how your log files should be rotated. The configuration file defines things like how often to rotate the logs (daily, weekly, monthly), how many old log files to keep, and how to handle the rotation process (e.g., compressing the old logs).</p>
<p>Here is an example of a logrotate configuration:</p>
<pre><code class="hljs">/path/to/your/log/file.log {
  daily
  rotate 7
  missingok
  notifempty
  compress
  delaycompress
  postrotate
    /usr/bin/kill -HUP `cat /var/run/my_script.pid 2&gt;/dev/null` 2&gt;/dev/null || true
  endscript
}
</code></pre>
<p>In this example, the logs are rotated daily, seven old log files are kept, and old logs are compressed. The <code>postrotate</code> script can be used to signal your script to reopen its log file, so it continues to write to the new log file. This example assumes that your script creates a PID file at <code>/var/run/my_script.pid</code>.</p>
<h2>Putting It All Together: A Comprehensive Example</h2>
<p>Let's combine all these techniques into a complete example. This example will demonstrate how to capture <code>STDERR</code>, add timestamps, use log levels, and implement basic log rotation. Keep in mind that this is a simplified example, but it shows the core concepts.</p>
<pre><code class="hljs">#!/bin/bash

# Configuration
LOG_FILE=&quot;/var/log/my_script.log&quot;
LOG_LEVEL=&quot;DEBUG&quot;

# Log Levels
LOG_INFO=1
LOG_WARNING=2
LOG_ERROR=3
LOG_DEBUG=4

# Function to log messages
log() {
  local timestamp=$(date &#39;+%Y-%m-%d %H:%M:%S&#39;)
  local level=$1
  shift
  local message=&quot;$@&quot;

  # Convert string log level to numeric value
  case &quot;$LOG_LEVEL&quot; in
    &quot;INFO&quot;)    LOG_LEVEL_NUM=$LOG_INFO    ;;
    &quot;WARNING&quot;) LOG_LEVEL_NUM=$LOG_WARNING ;;
    &quot;ERROR&quot;)   LOG_LEVEL_NUM=$LOG_ERROR   ;;
    &quot;DEBUG&quot;)   LOG_LEVEL_NUM=$LOG_DEBUG   ;;
    *)          LOG_LEVEL_NUM=$LOG_INFO    ;;
  esac

  if [[ $LOG_LEVEL_NUM -ge $level ]]; then
    case $level in
      $LOG_INFO)    LEVEL_STR=&quot;INFO&quot;    ;;
      $LOG_WARNING) LEVEL_STR=&quot;WARNING&quot; ;;
      $LOG_ERROR)   LEVEL_STR=&quot;ERROR&quot;   ;;
      $LOG_DEBUG)   LEVEL_STR=&quot;DEBUG&quot;   ;;
      *)            LEVEL_STR=&quot;UNKNOWN&quot; ;;
    esac
    echo &quot;$timestamp $LEVEL_STR: $message&quot; &gt;&gt; &quot;$LOG_FILE&quot;
  fi
}

# Redirect STDERR to the log function
exec 2&gt;&amp;1

# --- Main Script --- 
log $LOG_INFO &quot;Script started&quot;

# Simulate an error
if ! ls /nonexistent/path &gt; /dev/null 2&gt;&amp;1
then
  log $LOG_ERROR &quot;Failed to list directory /nonexistent/path&quot;
fi

# Debugging information
log $LOG_DEBUG &quot;Checking some variables...&quot;

# --- Script end ---
log $LOG_INFO &quot;Script finished successfully&quot;

exit 0
</code></pre>
<p>In this comprehensive example, the script utilizes log levels to control the verbosity of the logs. It defines log levels such as <code>INFO</code>, <code>WARNING</code>, <code>ERROR</code>, and <code>DEBUG</code>. The script includes a log function that adds timestamps, log levels, and messages to a log file. The script also demonstrates how to redirect <code>STDERR</code> to capture error messages. Finally, the script provides an example of how to simulate an error and log debugging information. This gives you a solid starting point for implementing comprehensive logging in your shell scripts.</p>
<h2>Best Practices and Further Exploration</h2>
<p>Alright, you've got the basics down, so let's talk about some best practices and where you can go from here. First off, consistency is key. Choose a logging style (e.g., using specific log levels, timestamp formats, and message formats) and stick with it throughout your scripts. This will make your logs much easier to read and analyze. Secondly, don't over-log. Too much logging can clutter your logs and make it difficult to find the important information. Strike a balance between providing enough detail to troubleshoot problems and keeping your logs manageable.</p>
<ul>
<li><em><strong>Consider Using External Libraries</strong></em>: For more complex logging needs, explore external libraries or frameworks. Some popular choices for shell scripting include <code>logger</code> (a standard Unix command) and libraries that provide more advanced features.</li>
<li><em><strong>Centralized Logging</strong></em>: In a larger environment, consider using a centralized logging system like <code>syslog</code> or <code>rsyslog</code>. These systems allow you to collect logs from multiple servers in one place. This makes it easier to monitor and analyze logs across your entire infrastructure.</li>
<li><em><strong>Log Analysis Tools</strong></em>: Learn about tools that can help you analyze your logs. Tools like <code>grep</code>, <code>awk</code>, and <code>sed</code> are invaluable for searching and filtering log messages. There are also more advanced log analysis tools available, such as the ELK stack (Elasticsearch, Logstash, and Kibana), that can provide powerful search, visualization, and analysis capabilities.</li>
</ul>
<h2>Conclusion: Logging is Your Friend</h2>
<p>So there you have it, guys. Logging is an essential skill for any shell script developer. By capturing <code>STDERR</code>, adding timestamps, and using techniques like log levels and log rotation, you can create effective logging systems that help you debug, monitor, and maintain your scripts. Don't be afraid to experiment with different techniques and find what works best for you. Happy scripting, and happy logging!</p>

                    </div>
                    <aside class="related-posts">
                        <div class="ad-sidebar container">
                            <!-- <div class="ad-wrapper">
    <span>Iklan Related</span>
</div> -->
                        </div>
                        <h2 class="related-posts-title">Related Posts</h2><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/enam-telecom-stock-analysis-decoding">Enam Telecom Stock Analysis Decoding Key Metrics And Performance</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-14T03:51:09+00:00">Jul 14, 2025</time>
		                        <span class="view-count">
									64 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/solving-circle-equations-finding-radius">Solving Circle Equations Finding Radius And Center</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-13T17:49:44+00:00">Jul 13, 2025</time>
		                        <span class="view-count">
									50 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/add-new-student-statistics-by">Add New Student Statistics By Degree And Visualize Exchange Requests</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-14T10:22:05+00:00">Jul 14, 2025</time>
		                        <span class="view-count">
									68 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/calculating-molarity-of-hcl-solution">Calculating Molarity Of HCl Solution A Stoichiometry Problem</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-18T21:43:44+00:00">Jul 18, 2025</time>
		                        <span class="view-count">
									60 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/treat-nail-fungus-treatments-and">Treat Nail Fungus: Treatments And Prevention Tips</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-06T04:51:33+00:00">Aug 6, 2025</time>
		                        <span class="view-count">
									49 views
		                        </span>
                            </div>
                        </article>
                    </aside>
                    <aside class="related-posts"></aside>
                </div>
            </div>
        </article>
        <a href="#" class="back-to-top" id="backToTop" title="Back to top">
        	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-bar-up" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M3.646 11.854a.5.5 0 0 0 .708 0L8 8.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708M2.4 5.2c0 .22.18.4.4.4h10.4a.4.4 0 0 0 0-.8H2.8a.4.4 0 0 0-.4.4"/>
			</svg>
		</a>
    </main>
    <footer class="footer">
        <div class="container">
            <p>Â© 2025 Question Notes</p>
        </div>
    </footer>
    <script>
    	(() => {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const toggleMenu = () => {
                navMenu.classList.toggle('nav-menu-active');
                navToggle.classList.toggle('nav-toggle-active');
            };
            const backToTopHandler = (e) => {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            navToggle.addEventListener('click', toggleMenu);
            document.getElementById('backToTop').addEventListener('click', backToTopHandler);
            window.addEventListener('pagehide', () => {
                navToggle.removeEventListener('click', toggleMenu);
                document.getElementById('backToTop').removeEventListener('click', backToTopHandler);
            });
        })();
		(() => {
            window.addEventListener("DOMContentLoaded", (event) => {
                const ellHljs = document.createElement("script");
                ellHljs.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js");
                ellHljs.onload = () => {
                    hljs.highlightAll();
                };
                document.querySelector("body").append(ellHljs);
                const ellFont = document.createElement("link");
                ellFont.setAttribute("href", "https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css");
                ellFont.setAttribute("rel", "stylesheet");
                document.querySelector("head").append(ellFont);
                window.addEventListener('pagehide', () => {
                    // ellHljs.remove();
                    ellFont.remove();
                });

            });
        })();
    </script>
    
    
    
</body>
</html>