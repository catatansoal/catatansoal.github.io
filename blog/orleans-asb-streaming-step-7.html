<!DOCTYPE html>
<html lang="en">
<head>
	<title>Orleans ASB Streaming: Step 7 - Receiving Path</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Orleans ASB Streaming: Step 7 - Receiving Path...">
    <link rel="canonical" href="https://catatansoal.github.io/blog/orleans-asb-streaming-step-7">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Orleans ASB Streaming: Step 7 - Receiving Path">
	<meta property="og:description" content="Orleans ASB Streaming: Step 7 - Receiving Path...">
	<meta property="og:url" content="https://catatansoal.github.io/blog/orleans-asb-streaming-step-7">
	<meta property="og:site_name" content="ANABEL">
	<meta property="article:published_time" content="2025-08-10T09:04:50+00:00">
	<meta property="article:author" content="ADMIN">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js">
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <link rel="preload" fetchpriority="high" as="image" href="https://tse4.mm.bing.net/th?q=Step%207%3A%20Receiving%20Path%20(Dequeue%20%E2%86%92%20Cache%20%E2%86%92%20Delivery)%20in%20Orleans%20Azure%20Service%20Bus%20Streaming">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style type="text/css">
    	:root{--primary-color:#3740ff;--text-color:#202124;--background-color:#ffffff;--gray-100:#f8f9fa;--gray-200:#e9ecef}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6;color:var(--text-color);background-color:var(--background-color)}.container{max-width:1200px;margin:0 auto;padding:0 1.5rem}.header{background-color:var(--background-color);border-bottom:1px solid var(--gray-200);position:sticky;top:0;z-index:100}.nav{padding:.5rem 0}.nav-container{display:flex;justify-content:space-between;align-items:center;gap:1rem}.nav-left{display:flex;align-items:center;flex-shrink:0}.logo{font-weight:700;color:var(--primary-color)}.blog-tag{margin-left:1rem;padding:.25rem .5rem;background-color:var(--gray-100);border-radius:4px;font-size:.875rem}.nav-search{flex-grow:1;max-width:300px}.search-form{position:relative;width:100%}.search-input{width:100%;padding:.5rem 2.5rem .5rem 1rem;border:1px solid var(--gray-200);border-radius:24px;font-size:.875rem;transition:all 0.2s}.search-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgb(55 64 255 / .1)}.search-button{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#5f6368;cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center}.search-button:hover{color:var(--primary-color)}.nav-toggle{display:none;background:none;border:none;cursor:pointer;padding:.5rem}.hamburger{display:block;position:relative;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before,.hamburger::after{content:'';position:absolute;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before{top:-6px}.hamburger::after{bottom:-6px}.nav-toggle-active .hamburger{background:#fff0}.nav-toggle-active .hamburger::before{transform:rotate(45deg);top:0}.nav-toggle-active .hamburger::after{transform:rotate(-45deg);bottom:0}.nav-list{display:flex;list-style:none;gap:2rem}.nav-link{color:var(--text-color);text-decoration:none;font-size:.9rem;transition:color 0.2s}.nav-link:hover{color:var(--primary-color)}.article-header{padding:2rem 0;background-color:var(--gray-100)}.article-layout{display:grid;grid-template-columns:1fr 350px;gap:3rem;padding:1rem 0;align-items: start}h1,h2,h3,h4,h5,h6{font-family:"Crimson Text","Times New Roman",Times,serif}h1{font-size:2.5rem;line-height:1.2;margin-bottom:1rem}.meta{color:#5f6368;font-size:.875rem;display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.view-count{display:inline-flex;align-items:center;gap:.25rem}.view-count svg{color:#5f6368}.content{min-width:0;border-bottom:1px solid #dddddd5e;margin-top:1rem;white-space:pre-line !important;overflow-wrap:break-word;overflow-x:auto;word-break:break-word}.lead{font-size:1.25rem;color:#5f6368;margin-bottom:2rem}h2,h3,h4,h5,h6{font-size:1.75rem;margin:1rem 0 1rem}p,pre,ol,ul>li{margin-bottom:1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;font-size:1.3rem;text-align: justify;}p>code{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px}hr{margin:1rem 0 1rem 0}.code-example{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;margin:1.5rem 0;overflow-x:auto}code{font-family:'Roboto Mono',monospace;font-size:.875rem}ul{margin:.2rem 0;padding-left:1.5rem}.related-posts{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;position:sticky;top:5rem}.related-posts-title,.newpost-posts-list{font-size:1.75rem;margin:0 0 1rem}.related-posts-list{display:flex;flex-direction:column;gap:.5rem}.related-post,.newpost-post{border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:10px}.related-post:last-child,.newpost-post:last-child{padding-bottom:0;border-bottom:none}.related-post-title,.newpost-post-title{font-size:1.2rem;margin:0 0 .1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;display: -webkit-box;-webkit-line-clamp: 3;-webkit-box-orient: vertical;overflow: hidden;}.related-post-title a,.newpost-post-title a{color:var(--text-color);text-decoration:none;transition:color 0.2s}.related-post-title a:hover,.newpost-post-title a:hover{color:var(--primary-color)}.related-post time{font-size:.875rem;color:#5f6368}.footer{background-color:var(--gray-100);padding:2rem 0;margin-top:4rem;color:#5f6368;font-size:.875rem}.nav-menu>ul>li{margin-bottom:0}@media (max-width:1024px){.container{max-width:800px}.article-layout{grid-template-columns:1fr;gap:2rem}.related-posts{position:static}}@media (max-width:768px){.nav-container{flex-wrap:wrap}.nav-search{order:3;max-width:none;width:100%;margin-top:.1rem}.nav-toggle{display:block}.nav-menu{display:none;position:absolute;top:100%;left:0;right:0;background:var(--background-color);padding:1rem 0;border-bottom:1px solid var(--gray-200)}.nav-menu-active{display:block}.nav-list{flex-direction:column;gap:.1rem;padding:0 1.5rem}.nav-link{display:block;padding:.2rem 0}h1{font-size:2rem}.article-header{padding:2rem 0}.content{padding:.1rem 0}}table{width:100%;border-collapse:collapse;margin:20px 0;font-family:'Arial',sans-serif}th,td{padding:12px 15px;text-align:left;border:1px solid #ddd}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9}tr:nth-child(even) td{background-color:#f2f2f2}@media screen and (max-width:768px){table{border:0;display:block;overflow-x:auto;white-space:nowrap}th,td{padding:10px;text-align:right}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9;border-bottom:1px solid #ddd}tr:nth-child(even) td{background-color:#f2f2f2}}a{text-decoration:none;color:#540707}.katex-html{padding: .2rem;color: #000;font-weight: 700;font-size: 1.3rem;overflow-wrap: break-word;max-width: 100%;white-space: normal !important}.category{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;margin:1rem 0 1rem 0}.tag{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px;font-family:"Newsreader",serif}.tag>a{text-decoration:none;color:#000}img{margin:auto;display:block;max-width:100%;height:auto;margin-bottom:1rem}.katex{white-space: pre-line !important;display: inline-block;max-width: 100%;overflow-x: auto;overflow-y: hidden;scrollbar-width: thin;overflow-wrap: break-word;word-break: break-word;vertical-align: -7px}.content > p {overflow-wrap: break-word;word-break: break-word}
    </style>
    <style type="text/css">
    	pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}
		.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}
    	pre{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;font-weight:400;word-break:break-word;word-wrap:break-word;box-sizing:inherit;border-radius:4px;overflow-x:auto;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}code{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;word-wrap:break-word;word-break:break-word;font-style:normal;line-height:20px;letter-spacing:-.003em;box-sizing:inherit;font-weight:400;font-size:75%;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}
    </style>
    <style type="text/css">
    	.back-to-top{position:fixed;bottom:20px;right:20px;background-color:#a73f3f;color:#fff;padding:8px 10px;border-radius:50%;box-shadow:0 4px 6px rgb(0 0 0 / .2);font-size:10px;font-weight:700;text-decoration:none;text-align:center;transition:opacity 0.3s ease,visibility 0.3s ease;z-index:99999;opacity:1;visibility:visible}.back-to-top:hover{background-color:#0056b3}
    </style>
    <style type="text/css">
        .ad-header {margin: 1rem auto 1rem;background-color: #fdfdfd;text-align: center;display: block;}.ad-header .ad-wrapper {min-height: 90px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #555;font-weight: 500;padding: 3rem;border: 1px dashed #ccc;border-radius: 6px;}@media (max-width: 768px) {.ad-header {padding: 0.75rem;}}.ad-sidebar {margin: 0 0 1rem;background-color: #fefefe;text-align: center;padding: 0px;width: 100%;max-width: 100%;display: block;}.ad-sidebar .ad-wrapper {min-height: 250px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #444;font-weight: 500;border: 1px dashed #aaa;border-radius: 6px;padding: 0rem;}@media (max-width: 1024px) {.ad-sidebar {padding: 0.75rem;}}
    </style>
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "Article",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://catatansoal.github.io/blog/orleans-asb-streaming-step-7"
          },
          "headline": "Orleans ASB Streaming: Step 7 - Receiving Path",
          "description": "Orleans ASB Streaming: Step 7 - Receiving Path...",
          "image": [
            "https://tse4.mm.bing.net/th?q=Step%207%3A%20Receiving%20Path%20(Dequeue%20%E2%86%92%20Cache%20%E2%86%92%20Delivery)%20in%20Orleans%20Azure%20Service%20Bus%20Streaming"
          ],
          "author": {
            "@type": "Person",
            "name": "ADMIN",
            "jobTitle": "Editor web"
          },
          "publisher": {
            "@type": "Organization",
            "name": "ANABEL",
            "logo": {
              "@type": "ImageObject",
              "url": "https://tse4.mm.bing.net/th?q=ANABEL%20WEB"
            }
          },
          "datePublished": "2025-08-10T09:04:50+00:00",
          "dateModified": "2025-08-10T09:04:50+00:00"
        }
    </script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container nav-container">
                <div class="nav-left">
                    <span class="logo">ANABEL</span>
                    <span class="blog-tag">Article</span>
                </div>
                <div class="nav-search">
                    <form class="search-form" role="search">
                        <input 
                            type="search" 
                            class="search-input"
                            placeholder="Search articles..."
                            aria-label="Search articles"
                        >
                        <button type="submit" class="search-button" aria-label="Submit search">🔎</button>
                    </form>
                </div>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <span class="hamburger"></span>
                </button>
                <div class="nav-menu">
                    <ul class="nav-list">
                    	<li><a href="/" class="nav-link">HOME</a></li>
                        <li><a href="/pages/About" class="nav-link">About</a></li>
                        <li><a href="/pages/Contact" class="nav-link">Contact</a></li>
                        <li><a href="/pages/Disclaimer" class="nav-link">Disclaimer</a></li>
                        <li><a href="/pages/Privacy" class="nav-link">Privacy</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="main">
        <article class="article">
            <header class="article-header">
                <div class="container">
                    <h1>Orleans ASB Streaming: Step 7 - Receiving Path</h1>
                    <div class="meta">
                        <time datetime="2025-08-10T09:04:50+00:00">Aug 10, 2025</time>
                        <span class="author">by ADMIN</span>
                        <span class="view-count">
                            <span id="viewCount">47</span> views
                        </span>
                    </div>
                </div>
            </header>
            <div class="ad-header container">
                <div class="ad-wrapper">
    Iklan Headers
</div>
            </div>
            <div class="container">
                <div class="article-layout">
                    <div class="content">
                        <img src="https://tse4.mm.bing.net/th?q=Step%207%3A%20Receiving%20Path%20(Dequeue%20%E2%86%92%20Cache%20%E2%86%92%20Delivery)%20in%20Orleans%20Azure%20Service%20Bus%20Streaming" title="Step 7: Receiving Path (Dequeue → Cache → Delivery) in Orleans Azure Service Bus Streaming" width="300" height="200"/>
<p>Hey guys! Let's dive into Step 7 of our Orleans Azure Service Bus (ASB) streaming journey. This step is all about setting up the receiving path, which involves dequeuing messages, caching them, and finally delivering them to the subscribers. We're focusing on implementing the <code>IQueueAdapterReceiver</code> with a single consumer per entity for this Minimum Viable Product (MVP), feeding directly into the cache. Think of it like building the conveyor belt that brings messages from ASB into our Orleans system.</p>
<h2>Why This Matters</h2>
<p>The goal here is to implement a robust mechanism for receiving messages from Azure Service Bus and making them available to our Orleans streams. We're modeling this after a non-rewindable queue (like ASQ/SQS), which means we won't be implementing rewind, offsets, or Event Hubs semantics just yet. This keeps things simple and focused for our MVP.</p>
<h2>Tasks Breakdown</h2>
<p>Our main task is to implement the <code>ServiceBusAdapterReceiver</code>, which will act as our <code>IQueueAdapterReceiver</code>. Here’s a closer look at what that entails:</p>
<h3>Implementing <code>ServiceBusAdapterReceiver</code> : <code>IQueueAdapterReceiver</code></h3>
<p>This is where the magic happens! We need to construct a <code>ServiceBusReceiver</code> for the target entity, whether it’s a queue or a topic/subscription. Let's break this down:</p>
<ul>
<li>
<p><strong>Constructing <code>ServiceBusReceiver</code>:</strong></p>
<ul>
<li>For Queues: We'll use <code>ServiceBusClient.CreateReceiver(queueName, new ServiceBusReceiverOptions { PrefetchCount = …, ReceiveMode = PeekLock })</code>. The <code>PrefetchCount</code> is crucial for performance, allowing us to buffer messages locally. <code>ReceiveMode.PeekLock</code> ensures messages aren't lost if processing fails.</li>
<li>For Topic/Subscriptions: We'll use <code>CreateReceiver(topicName, subscriptionName, …)</code>. This is similar to queues but includes the subscription name, which is key for topic-based pub/sub.</li>
</ul>
</li>
<li>
<p><strong>Background Message Pump:</strong></p>
<ul>
<li>We'll set up a background process (hosted by the adapter receiver) that repeatedly calls <code>ReceiveMessagesAsync(batchSize, TimeSpan)</code>. This pump will pull messages from ASB in batches, making our message consumption efficient. Think of it as the engine that keeps the messages flowing.</li>
<li>These received messages are then converted into <code>ServiceBusBatchContainers</code> (via our data adapter) and enqueued into the <code>IQueueCache</code>. The data adapter acts as a translator, ensuring ASB messages fit our internal Orleans streaming format.</li>
</ul>
</li>
<li>
<p><strong>Message Completion and Abandonment:</strong></p>
<ul>
<li>The cache plays a critical role here. When it confirms that a message has been successfully delivered to all subscribers, we call <code>CompleteMessageAsync</code>. This tells ASB the message is processed and can be removed from the queue or topic.</li>
<li>On the flip side, if delivery fails for any reason, we call <code>Abandon</code>. This puts the message back in ASB, allowing for redelivery attempts. It’s like a safety net that prevents message loss.</li>
</ul>
</li>
<li>
<p><strong>Lock Renewal:</strong></p>
<ul>
<li>If <code>LockAutoRenew</code> is enabled, we'll implement logic to automatically renew the message lock. This is crucial for long-running processes to prevent messages from being returned to the queue prematurely. It's like keeping the lights on while we work.</li>
</ul>
</li>
</ul>
<h3>Ensuring Clean Shutdown</h3>
<p>It's super important that our receiver stops cleanly when the silo shuts down. We don't want any lingering processes or lost messages. This involves proper disposal of resources and graceful termination of the background pump.</p>
<h2>Acceptance Criteria</h2>
<p>To make sure we're on the right track, we have a few key acceptance criteria:</p>
<ul>
<li><strong>End-to-End Delivery:</strong> Messages should flow seamlessly from ASB to our consumers.</li>
<li><strong>In-Order Delivery:</strong> For each entity, messages must be delivered in the order they were sent. This is vital for many stream processing scenarios.</li>
<li><strong>Message Handling:</strong> Messages should be completed on success and retried on failure, as discussed earlier.</li>
</ul>
<h2>Test Plan</h2>
<p>We'll be putting our implementation through its paces with these tests:</p>
<h3>Queue E2E Test</h3>
<ol>
<li><strong>Setup:</strong> We'll start an Orleans silo with our provider and a consumer grain subscribed to a stream.</li>
<li><strong>Publish:</strong> We'll publish 100 ordered integers to that stream.</li>
<li><strong>Assert:</strong> We'll assert that the consumer receives all messages, in the correct order, and only once. This verifies the core functionality of our queue receiver.</li>
</ol>
<h3>Topic/Sub E2E Test</h3>
<p>We'll run the same test as above, but this time using a topic/subscription entity. This ensures our receiver works correctly in both queue and pub/sub scenarios.</p>
<h2>Deliverables</h2>
<p>The main deliverable for this step is the <code>ServiceBusAdapterReceiver.cs</code> file, which will live in the <code>/src/Azure/Orleans.Streaming.AzureServiceBus/Adapter/</code> directory. This file will contain all the code for our receiver implementation.</p>
<h2>Out of Scope (For Now)</h2>
<p>To keep our focus sharp, we're intentionally leaving a few things out of scope for this MVP:</p>
<ul>
<li><strong>Advanced Failure Handling (DLQ):</strong> We won't be implementing Dead-Letter Queue (DLQ) handling just yet. This is a more advanced feature for dealing with persistently failing messages.</li>
<li><strong>Concurrency &gt; 1:</strong> We're sticking with a single consumer per entity for now. Scaling concurrency will be a future enhancement.</li>
</ul>
<h2>Deep Dive into Key Components</h2>
<p>Let's break down some of the core components and concepts we'll be working with. Understanding these in detail will help you grasp the overall flow and implementation.</p>
<h3>1. <code>IQueueAdapterReceiver</code></h3>
<p>This interface is the heart of our message receiving process. It defines the contract for receiving messages from a queue-like source and delivering them to Orleans streams. Our <code>ServiceBusAdapterReceiver</code> will implement this interface.</p>
<p><strong>Key Methods:</strong></p>
<ul>
<li><code>ReceiveMessagesAsync(int maxCount, TimeSpan timeout)</code>: This method is the workhorse. It attempts to receive up to <code>maxCount</code> messages from the queue within the given <code>timeout</code>. It returns a list of received messages, which we'll then process and enqueue into our cache.</li>
<li><code>Shutdown(CancellationToken cancellationToken)</code>: This is crucial for graceful shutdown. It allows us to stop the receiver and clean up resources when the silo is shutting down.</li>
</ul>
<h3>2. <code>ServiceBusClient</code> and <code>ServiceBusReceiver</code></h3>
<p>These classes are part of the Azure.ServiceBus NuGet package and provide the core functionality for interacting with Azure Service Bus.</p>
<p>The <strong><code>ServiceBusClient</code></strong> is our entry point for connecting to ASB. We'll use it to create <code>ServiceBusReceiver</code> instances for our queues and topics/subscriptions. Think of it as the factory for our receivers.</p>
<p>The <strong><code>ServiceBusReceiver</code></strong> is responsible for receiving messages from a specific queue or topic/subscription. It provides methods for receiving, completing, and abandoning messages.</p>
<p><strong>Key Methods:</strong></p>
<ul>
<li><code>ReceiveMessagesAsync(int maxMessages, TimeSpan maxWaitTime)</code>: As mentioned earlier, this method retrieves messages from ASB.</li>
<li><code>CompleteMessageAsync(ServiceBusReceivedMessage message)</code>: This tells ASB that we've successfully processed a message, and it can be removed from the queue.</li>
<li><code>AbandonMessageAsync(ServiceBusReceivedMessage message)</code>: This puts a message back into the queue, allowing for redelivery attempts.</li>
</ul>
<h3>3. <code>ServiceBusReceiverOptions</code></h3>
<p>When creating a <code>ServiceBusReceiver</code>, we can provide <code>ServiceBusReceiverOptions</code> to configure its behavior. Two important options for us are:</p>
<ul>
<li><code>PrefetchCount</code>: This determines how many messages the receiver will buffer locally. A higher prefetch count can improve performance by reducing round trips to ASB, but it also increases memory consumption. It's a balancing act.</li>
<li><code>ReceiveMode</code>: We'll be using <code>ReceiveMode.PeekLock</code>, which ensures that messages are locked when we receive them. This prevents other consumers from processing the same message simultaneously. If we fail to process a message, we can abandon it, and it will become available again.</li>
</ul>
<h3>4. <code>ServiceBusBatchContainer</code></h3>
<p>This class is likely a custom container we'll create to hold batches of <code>ServiceBusReceivedMessage</code> instances. It provides a convenient way to group messages together for processing and enqueuing into the cache.</p>
<h3>5. <code>IQueueCache</code></h3>
<p>This interface (or class) represents our in-memory cache for received messages. It's a crucial component for decoupling the receiver from the actual message delivery to subscribers.</p>
<p>The cache will likely have methods for:</p>
<ul>
<li>Enqueuing messages: Adding received messages to the cache.</li>
<li>Tracking delivery status: Monitoring whether messages have been successfully delivered to all subscribers.</li>
<li>Notifying the receiver: Informing the receiver when a message has been successfully delivered, so it can be completed in ASB.</li>
</ul>
<h3>6. Message Completion and Abandonment: A Closer Look</h3>
<p>As we've highlighted, message completion and abandonment are vital for ensuring reliable message processing. Let's delve a bit deeper into why they're so important.</p>
<ul>
<li><strong>Completion:</strong> When we call <code>CompleteMessageAsync</code>, we're essentially telling ASB,</li>
</ul>

                    </div>
                    <aside class="related-posts">
                        <div class="ad-sidebar container">
                            <div class="ad-wrapper">
    <span>Iklan Related</span>
</div>
                        </div>
                        <h2 class="related-posts-title">Related Posts</h2><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/persistent-kv-seq-len-bug">Persistent Kv_seq_len Bug In KVCache Factory Breaks Core Pruning Logic</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-14T08:45:52+00:00">Jul 14, 2025</time>
		                        <span class="view-count">
									70 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/grow-strong-roots-tips-for">Grow Strong Roots: Tips For Faster Plant Root Growth</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-10T01:15:53+00:00">Aug 10, 2025</time>
		                        <span class="view-count">
									52 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/guilt-by-association-a-catholic">Guilt By Association: A Catholic Perspective</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-01T14:30:09+00:00">Aug 1, 2025</time>
		                        <span class="view-count">
									44 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/finding-the-equation-of-a">Finding The Equation Of A Circle Given Diameter Endpoints</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-14T00:02:14+00:00">Jul 14, 2025</time>
		                        <span class="view-count">
									57 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/exploring-group-isomorphisms-is-phi">Exploring Group Isomorphisms Is $\phi[A]$ Isomorphic To $\omega[A]$</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-14T12:21:34+00:00">Jul 14, 2025</time>
		                        <span class="view-count">
									67 views
		                        </span>
                            </div>
                        </article>
                    </aside>
                    <aside class="related-posts"></aside>
                </div>
            </div>
        </article>
        <a href="#" class="back-to-top" id="backToTop" title="Back to top">
        	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-bar-up" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M3.646 11.854a.5.5 0 0 0 .708 0L8 8.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708M2.4 5.2c0 .22.18.4.4.4h10.4a.4.4 0 0 0 0-.8H2.8a.4.4 0 0 0-.4.4"/>
			</svg>
		</a>
    </main>
    <footer class="footer">
        <div class="container">
            <p>© 2025 ANABEL</p>
        </div>
    </footer>
    <script>
    	(() => {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const toggleMenu = () => {
                navMenu.classList.toggle('nav-menu-active');
                navToggle.classList.toggle('nav-toggle-active');
            };
            const backToTopHandler = (e) => {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            navToggle.addEventListener('click', toggleMenu);
            document.getElementById('backToTop').addEventListener('click', backToTopHandler);
            window.addEventListener('pagehide', () => {
                navToggle.removeEventListener('click', toggleMenu);
                document.getElementById('backToTop').removeEventListener('click', backToTopHandler);
            });
        })();
		(() => {
            window.addEventListener("DOMContentLoaded", (event) => {
                const ellHljs = document.createElement("script");
                ellHljs.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js");
                ellHljs.onload = () => {
                    hljs.highlightAll();
                };
                document.querySelector("body").append(ellHljs);
                const ellFont = document.createElement("link");
                ellFont.setAttribute("href", "https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css");
                ellFont.setAttribute("rel", "stylesheet");
                document.querySelector("head").append(ellFont);
                window.addEventListener('pagehide', () => {
                    // ellHljs.remove();
                    ellFont.remove();
                });

            });
        })();
    </script>
    
    
    
</body>
</html>