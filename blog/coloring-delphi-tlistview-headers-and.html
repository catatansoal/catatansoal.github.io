<!DOCTYPE html>
<html lang="en">
<head>
	<title>Coloring Delphi TListView Headers &amp; Unused Space</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Coloring Delphi TListView Headers & Unused Space...">
    <link rel="canonical" href="https://catatansoal.github.io/blog/coloring-delphi-tlistview-headers-and">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Coloring Delphi TListView Headers &amp; Unused Space">
	<meta property="og:description" content="Coloring Delphi TListView Headers & Unused Space...">
	<meta property="og:url" content="https://catatansoal.github.io/blog/coloring-delphi-tlistview-headers-and">
	<meta property="og:site_name" content="Question Notes">
	<meta property="article:published_time" content="2025-08-06T09:45:19+00:00">
	<meta property="article:author" content="ADMIN">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js">
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <link rel="preload" fetchpriority="high" as="image" href="https://tse4.mm.bing.net/th?q=Delphi%20ListView%3A%20Coloring%20Column%20Headers%20and%20Unused%20Space">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style type="text/css">
    	:root{--primary-color:#3740ff;--text-color:#202124;--background-color:#ffffff;--gray-100:#f8f9fa;--gray-200:#e9ecef}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6;color:var(--text-color);background-color:var(--background-color)}.container{max-width:1200px;margin:0 auto;padding:0 1.5rem}.header{background-color:var(--background-color);border-bottom:1px solid var(--gray-200);position:sticky;top:0;z-index:100}.nav{padding:.5rem 0}.nav-container{display:flex;justify-content:space-between;align-items:center;gap:1rem}.nav-left{display:flex;align-items:center;flex-shrink:0}.logo{font-weight:700;color:var(--primary-color)}.blog-tag{margin-left:1rem;padding:.25rem .5rem;background-color:var(--gray-100);border-radius:4px;font-size:.875rem}.nav-search{flex-grow:1;max-width:300px}.search-form{position:relative;width:100%}.search-input{width:100%;padding:.5rem 2.5rem .5rem 1rem;border:1px solid var(--gray-200);border-radius:24px;font-size:.875rem;transition:all 0.2s}.search-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgb(55 64 255 / .1)}.search-button{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#5f6368;cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center}.search-button:hover{color:var(--primary-color)}.nav-toggle{display:none;background:none;border:none;cursor:pointer;padding:.5rem}.hamburger{display:block;position:relative;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before,.hamburger::after{content:'';position:absolute;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before{top:-6px}.hamburger::after{bottom:-6px}.nav-toggle-active .hamburger{background:#fff0}.nav-toggle-active .hamburger::before{transform:rotate(45deg);top:0}.nav-toggle-active .hamburger::after{transform:rotate(-45deg);bottom:0}.nav-list{display:flex;list-style:none;gap:2rem}.nav-link{color:var(--text-color);text-decoration:none;font-size:.9rem;transition:color 0.2s}.nav-link:hover{color:var(--primary-color)}.article-header{padding:2rem 0;background-color:var(--gray-100)}.article-layout{display:grid;grid-template-columns:1fr 350px;gap:3rem;padding:1rem 0;align-items: start}h1,h2,h3,h4,h5,h6{font-family:"Crimson Text","Times New Roman",Times,serif}h1{font-size:2.5rem;line-height:1.2;margin-bottom:1rem}.meta{color:#5f6368;font-size:.875rem;display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.view-count{display:inline-flex;align-items:center;gap:.25rem}.view-count svg{color:#5f6368}.content{min-width:0;border-bottom:1px solid #dddddd5e;margin-top:1rem;white-space:pre-line !important;overflow-wrap:break-word;overflow-x:auto;word-break:break-word}.lead{font-size:1.25rem;color:#5f6368;margin-bottom:2rem}h2,h3,h4,h5,h6{font-size:1.75rem;margin:1rem 0 1rem}p,pre,ol,ul>li{margin-bottom:1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;font-size:1.3rem;text-align: justify;}p>code{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px}hr{margin:1rem 0 1rem 0}.code-example{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;margin:1.5rem 0;overflow-x:auto}code{font-family:'Roboto Mono',monospace;font-size:.875rem}ul{margin:.2rem 0;padding-left:1.5rem}.related-posts{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;position:sticky;top:5rem}.related-posts-title,.newpost-posts-list{font-size:1.75rem;margin:0 0 1rem}.related-posts-list{display:flex;flex-direction:column;gap:.5rem}.related-post,.newpost-post{border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:10px}.related-post:last-child,.newpost-post:last-child{padding-bottom:0;border-bottom:none}.related-post-title,.newpost-post-title{font-size:1.2rem;margin:0 0 .1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;display: -webkit-box;-webkit-line-clamp: 3;-webkit-box-orient: vertical;overflow: hidden;}.related-post-title a,.newpost-post-title a{color:var(--text-color);text-decoration:none;transition:color 0.2s}.related-post-title a:hover,.newpost-post-title a:hover{color:var(--primary-color)}.related-post time{font-size:.875rem;color:#5f6368}.footer{background-color:var(--gray-100);padding:2rem 0;margin-top:4rem;color:#5f6368;font-size:.875rem}.nav-menu>ul>li{margin-bottom:0}@media (max-width:1024px){.container{max-width:800px}.article-layout{grid-template-columns:1fr;gap:2rem}.related-posts{position:static}}@media (max-width:768px){.nav-container{flex-wrap:wrap}.nav-search{order:3;max-width:none;width:100%;margin-top:.1rem}.nav-toggle{display:block}.nav-menu{display:none;position:absolute;top:100%;left:0;right:0;background:var(--background-color);padding:1rem 0;border-bottom:1px solid var(--gray-200)}.nav-menu-active{display:block}.nav-list{flex-direction:column;gap:.1rem;padding:0 1.5rem}.nav-link{display:block;padding:.2rem 0}h1{font-size:2rem}.article-header{padding:2rem 0}.content{padding:.1rem 0}}table{width:100%;border-collapse:collapse;margin:20px 0;font-family:'Arial',sans-serif}th,td{padding:12px 15px;text-align:left;border:1px solid #ddd}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9}tr:nth-child(even) td{background-color:#f2f2f2}@media screen and (max-width:768px){table{border:0;display:block;overflow-x:auto;white-space:nowrap}th,td{padding:10px;text-align:right}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9;border-bottom:1px solid #ddd}tr:nth-child(even) td{background-color:#f2f2f2}}a{text-decoration:none;color:#540707}.katex-html{padding: .2rem;color: #000;font-weight: 700;font-size: 1.3rem;overflow-wrap: break-word;max-width: 100%;white-space: normal !important}.category{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;margin:1rem 0 1rem 0}.tag{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px;font-family:"Newsreader",serif}.tag>a{text-decoration:none;color:#000}img{margin:auto;display:block;max-width:100%;height:auto;margin-bottom:1rem}.katex{white-space: pre-line !important;display: inline-block;max-width: 100%;overflow-x: auto;overflow-y: hidden;scrollbar-width: thin;overflow-wrap: break-word;word-break: break-word;vertical-align: -7px}.content > p {overflow-wrap: break-word;word-break: break-word}
    </style>
    <style type="text/css">
    	pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}
		.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}
    	pre{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;font-weight:400;word-break:break-word;word-wrap:break-word;box-sizing:inherit;border-radius:4px;overflow-x:auto;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}code{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;word-wrap:break-word;word-break:break-word;font-style:normal;line-height:20px;letter-spacing:-.003em;box-sizing:inherit;font-weight:400;font-size:75%;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}
    </style>
    <style type="text/css">
    	.back-to-top{position:fixed;bottom:20px;right:20px;background-color:#a73f3f;color:#fff;padding:8px 10px;border-radius:50%;box-shadow:0 4px 6px rgb(0 0 0 / .2);font-size:10px;font-weight:700;text-decoration:none;text-align:center;transition:opacity 0.3s ease,visibility 0.3s ease;z-index:99999;opacity:1;visibility:visible}.back-to-top:hover{background-color:#0056b3}
    </style>
    <style type="text/css">
        .ad-header {margin: 1rem auto 1rem;background-color: #fdfdfd;text-align: center;display: block;}.ad-header .ad-wrapper {min-height: 90px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #555;font-weight: 500;padding: 3rem;border: 1px dashed #ccc;border-radius: 6px;}@media (max-width: 768px) {.ad-header {padding: 0.75rem;}}.ad-sidebar {margin: 0 0 1rem;background-color: #fefefe;text-align: center;padding: 0px;width: 100%;max-width: 100%;display: block;}.ad-sidebar .ad-wrapper {min-height: 250px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #444;font-weight: 500;border: 1px dashed #aaa;border-radius: 6px;padding: 0rem;}@media (max-width: 1024px) {.ad-sidebar {padding: 0.75rem;}}
    </style>
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "Article",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://catatansoal.github.io/blog/coloring-delphi-tlistview-headers-and"
          },
          "headline": "Coloring Delphi TListView Headers &amp; Unused Space",
          "description": "Coloring Delphi TListView Headers & Unused Space...",
          "image": [
            "https://tse4.mm.bing.net/th?q=Delphi%20ListView%3A%20Coloring%20Column%20Headers%20and%20Unused%20Space"
          ],
          "author": {
            "@type": "Person",
            "name": "ADMIN",
            "jobTitle": "Editor web"
          },
          "publisher": {
            "@type": "Organization",
            "name": "Question Notes",
            "logo": {
              "@type": "ImageObject",
              "url": "https://tse4.mm.bing.net/th?q=Question%20Notes"
            }
          },
          "datePublished": "2025-08-06T09:45:19+00:00",
          "dateModified": "2025-08-06T09:45:19+00:00"
        }
    </script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container nav-container">
                <div class="nav-left">
                    <span class="logo">Question Notes</span>
                    <span class="blog-tag">Article</span>
                </div>
                <div class="nav-search">
                    <form class="search-form" role="search">
                        <input 
                            type="search" 
                            class="search-input"
                            placeholder="Search articles..."
                            aria-label="Search articles"
                        >
                        <button type="submit" class="search-button" aria-label="Submit search">🔎</button>
                    </form>
                </div>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <span class="hamburger"></span>
                </button>
                <div class="nav-menu">
                    <ul class="nav-list">
                    	<li><a href="/" class="nav-link">HOME</a></li>
                        <li><a href="/pages/About" class="nav-link">About</a></li>
                        <li><a href="/pages/Contact" class="nav-link">Contact</a></li>
                        <li><a href="/pages/Disclaimer" class="nav-link">Disclaimer</a></li>
                        <li><a href="/pages/Privacy" class="nav-link">Privacy</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="main">
        <article class="article">
            <header class="article-header">
                <div class="container">
                    <h1>Coloring Delphi TListView Headers &amp; Unused Space</h1>
                    <div class="meta">
                        <time datetime="2025-08-06T09:45:19+00:00">Aug 6, 2025</time>
                        <span class="author">by ADMIN</span>
                        <span class="view-count">
                            <span id="viewCount">49</span> views
                        </span>
                    </div>
                </div>
            </header>
            <div class="ad-header container">
                <!-- <div class="ad-wrapper">
    Iklan Headers
</div> -->
            </div>
            <div class="container">
                <div class="article-layout">
                    <div class="content">
                        <img src="https://tse4.mm.bing.net/th?q=Delphi%20ListView%3A%20Coloring%20Column%20Headers%20and%20Unused%20Space" title="Delphi ListView: Coloring Column Headers and Unused Space" width="300" height="200"/><p>Hey guys! Ever wanted to spice up your Delphi ListView headers with some custom colors? Maybe you're tired of the default look and feel, or perhaps you need a specific color scheme for your application. Whatever the reason, you've come to the right place! In this article, we'll dive deep into how to color those TListView column headers, even the unused space, without relying on VCL Styles. We'll explore different approaches, discuss potential challenges, and provide you with practical solutions to make your ListViews shine. So, buckle up and let's get started!</p>
<h2>Why Color Your ListView Headers?</h2>
<p>Before we jump into the how-to, let's quickly touch on the <em>why</em>. Customizing the look of your application, especially elements like ListView headers, can significantly enhance the user experience. <strong>Color</strong> can be a powerful tool for:</p>
<ul>
<li><strong>Visual Hierarchy:</strong> Using different colors for headers can help users quickly identify columns and understand the data structure.</li>
<li><strong>Branding:</strong> Incorporating your brand colors into the UI can create a more cohesive and professional look.</li>
<li><strong>Accessibility:</strong> Thoughtful color choices can improve readability and make your application more accessible to users with visual impairments.</li>
<li><strong>Aesthetics:</strong> Let's be honest, sometimes you just want your app to look <em>cool</em>. Custom colors can add a touch of personality and make your application stand out.</li>
</ul>
<h2>The Challenge: Coloring Unused Header Space</h2>
<p>Coloring the main part of the header is relatively straightforward, but what about that pesky unused space? You know, the area to the right of the last column header? That's where things get a little trickier. The standard TListView control doesn't provide a direct way to color this area. This is a common pain point for Delphi developers, and the solutions often involve a bit of creative coding and Windows API magic.</p>
<h2>Diving into the Solutions</h2>
<p>Okay, enough talk, let's get our hands dirty with some code! We'll explore a few different methods to color your ListView headers, focusing on how to tackle that unused space.</p>
<h3>1. Owner-Draw to the Rescue</h3>
<p>Owner-draw is a classic technique in Delphi for customizing the appearance of controls. It gives you complete control over the drawing process, allowing you to paint every pixel exactly as you want. This is our primary weapon for tackling the header coloring challenge. By utilizing owner-draw, we gain the ability to not only customize the column headers individually but also to paint the unused space with a color of our choice. Let's break down how to implement this:</p>
<ul>
<li><strong>Setting <code>OwnerDraw</code> Property:</strong> The first step is to set the <code>OwnerDraw</code> property of your TListView to <code>True</code>. This tells the control that you'll be handling the drawing yourself.</li>
<li><strong>Handling the <code>OnDrawColumnHeader</code> Event:</strong> The magic happens in the <code>OnDrawColumnHeader</code> event. This event is triggered for each column header that needs to be drawn. Inside this event handler, you'll receive a <code>Rect</code> parameter, which defines the area of the header, and a <code>Canvas</code> object, which you'll use for drawing.</li>
<li><strong>Drawing the Header:</strong> Within the <code>OnDrawColumnHeader</code> event, you can use the <code>Canvas</code> object to fill the background of the header with your desired color and then draw the column title. This allows you to customize each header individually.</li>
<li><strong>Painting the Unused Space:</strong> This is the crucial part. To color the unused space, we need to calculate the area outside the existing columns and paint it. Here's the general approach:
<ol>
<li>Get the width of the ListView control.</li>
<li>Calculate the total width of all columns.</li>
<li>The difference between these two values is the width of the unused space.</li>
<li>Use the <code>Canvas</code> object to fill a rectangle in the unused space with your desired color.</li>
</ol>
</li>
</ul>
<p>Here's a snippet of Delphi code to illustrate the concept:</p>
<pre><code class="hljs">procedure TForm1.ListView1DrawColumnHeader(Sender: TObject; Column: TColumn; const Rect: TRect; DefaultDraw: Boolean);
var
  UnusedSpaceRect: TRect;
  TotalColumnWidth: Integer;
  i: Integer;
begin
  // Fill the header background with a color
  ListView1.Canvas.Brush.Color := clSkyBlue; // You can choose your color
  ListView1.Canvas.FillRect(Rect);

  // Draw the column title
  ListView1.Canvas.TextRect(Rect, Rect.Left + 4, Rect.Top + 2, Column.Caption);

  // Calculate total column width
  TotalColumnWidth := 0;
  for i := 0 to ListView1.Columns.Count - 1 do
  begin
    TotalColumnWidth := TotalColumnWidth + ListView1.Columns[i].Width;
  end;

  // Calculate unused space rectangle
  UnusedSpaceRect := Rect;
  UnusedSpaceRect.Left := TotalColumnWidth;
  UnusedSpaceRect.Right := ListView1.Width;

  // Fill the unused space with a different color
  ListView1.Canvas.Brush.Color := clGreen; // You can choose your color
  ListView1.Canvas.FillRect(UnusedSpaceRect);
end;
</code></pre>
<p>This code snippet provides a basic framework. You can customize it further to add more sophisticated drawing, such as gradients, images, or custom text formatting. Remember, owner-draw gives you pixel-perfect control, so the possibilities are virtually endless.</p>
<h3>2. Window Subclassing: A Deeper Dive</h3>
<p>For a more robust and potentially more efficient solution, we can explore window subclassing. This technique involves intercepting and processing Windows messages sent to the ListView's header control. This allows us to hook into the drawing process at a lower level and customize it to our needs. It's like becoming a message interceptor for the ListView's header!</p>
<ul>
<li><strong>Why Subclassing?</strong> Subclassing offers several advantages:
<ul>
<li><strong>Fine-grained Control:</strong> We can intercept specific Windows messages related to drawing, giving us precise control over the painting process.</li>
<li><strong>Performance:</strong> In some cases, subclassing can be more efficient than owner-draw, as we only process the messages we're interested in.</li>
<li><strong>Flexibility:</strong> Subclassing allows us to modify the behavior of the header control in various ways, not just its appearance.</li>
</ul>
</li>
<li><strong>The Process:</strong>
<ol>
<li><strong>Get the Header Control's Handle:</strong> We need to get the window handle (HWND) of the ListView's header control. This can be done using the <code>GetWindow</code> function with the <code>GW_CHILD</code> and <code>GetNextWindow</code> flags.</li>
<li><strong>Create a Subclass Procedure:</strong> We define a procedure that will act as our message handler for the header control. This procedure will receive all the Windows messages sent to the header.</li>
<li><strong>Subclass the Window:</strong> We use the <code>SetWindowLong</code> function with the <code>GWL_WNDPROC</code> flag to replace the header control's original window procedure with our subclass procedure. This effectively redirects messages to our handler.</li>
<li><strong>Intercept <code>WM_PAINT</code>:</strong> Inside our subclass procedure, we intercept the <code>WM_PAINT</code> message. This message is sent when the header control needs to be repainted.</li>
<li><strong>Handle Drawing:</strong> Within the <code>WM_PAINT</code> handler, we can perform our custom drawing. This involves:
<ul>
<li>Calling the original window procedure to perform the default drawing.</li>
<li>Painting the unused space using the <code>GetDC</code> and <code>FillRect</code> functions (or similar Windows API calls).</li>
<li>Releasing the device context.</li>
</ul>
</li>
<li><strong>Unsubclass the Window:</strong> When our form or application closes, we need to unsubclass the window by restoring the original window procedure using <code>SetWindowLong</code>.</li>
</ol>
</li>
</ul>
<p>Here's a Delphi code snippet illustrating the subclassing approach:</p>
<pre><code class="hljs">type
  THeaderProc = function(hWnd: HWND; Msg: Cardinal; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;

var
  OldHeaderProc: THeaderProc;
  HeaderHandle: HWND;

function NewHeaderProc(hWnd: HWND; Msg: Cardinal; wParam: WPARAM; lParam: LPARAM): LRESULT; stdcall;
var
  PaintStruct: TPaintStruct;
  DC: HDC;
  Rect: TRect;
  ListView: TListView;
  TotalColumnWidth: Integer;
  i: Integer;
  UnusedSpaceRect: TRect;
begin
  Result := CallWindowProc(OldHeaderProc, hWnd, Msg, wParam, lParam);

  if Msg = WM_PAINT then
  begin
    DC := BeginPaint(hWnd, PaintStruct);
    try
      // Get the ListView associated with the header
      ListView := TListView(GetParent(hWnd));

      // Calculate total column width
      TotalColumnWidth := 0;
      for i := 0 to ListView.Columns.Count - 1 do
      begin
        TotalColumnWidth := TotalColumnWidth + ListView.Columns[i].Width;
      end;

      // Get the header control rectangle
      GetClientRect(hWnd, Rect);

      // Calculate unused space rectangle
      UnusedSpaceRect := Rect;
      UnusedSpaceRect.Left := TotalColumnWidth;

      // Fill the unused space with a color
      FillRect(DC, UnusedSpaceRect, CreateSolidBrush(COLORREF(clYellow))); // You can choose your color
    finally
      EndPaint(hWnd, PaintStruct);
    end;
  end;
end;

procedure TForm1.FormCreate(Sender: TObject);
var
  Header: HWND;
begin
  // Get the header control handle
  Header := GetWindow(ListView1.Handle, GW_CHILD);
  HeaderHandle := GetWindow(Header, GW_HWNDNEXT);  // Corrected line

  // Subclass the header control
  OldHeaderProc := THeaderProc(SetWindowLong(HeaderHandle, GWL_WNDPROC, Integer(@NewHeaderProc)));
end;

procedure TForm1.FormDestroy(Sender: TObject);
begin
  // Unsubclass the header control
  SetWindowLong(HeaderHandle, GWL_WNDPROC, Integer(OldHeaderProc));
end;
</code></pre>
<p>This code demonstrates the core concepts of window subclassing. It intercepts the <code>WM_PAINT</code> message, calculates the unused space, and fills it with a color. Remember to handle potential errors and edge cases in a production environment.</p>
<h3>3. A Hybrid Approach: Combining Owner-Draw and Custom Drawing</h3>
<p>A third approach involves a hybrid of owner-draw and direct drawing on the ListView's canvas. This can sometimes offer a balance between the control offered by owner-draw and the simplicity of direct canvas manipulation.</p>
<ul>
<li><strong>How it Works:</strong>
<ol>
<li><strong>Enable Owner-Draw:</strong> As with the first approach, we start by setting the <code>OwnerDraw</code> property of the TListView to <code>True</code>.</li>
<li><strong>Handle <code>OnAdvancedCustomDraw</code> or <code>OnCustomDraw</code>:</strong> Instead of <code>OnDrawColumnHeader</code>, we'll use the <code>OnAdvancedCustomDraw</code> or <code>OnCustomDraw</code> event. These events provide more general drawing capabilities for the entire ListView, including the header.</li>
<li><strong>Check Draw Stage:</strong> Inside the event handler, we need to check the <code>DrawStage</code> parameter to determine which part of the ListView is being drawn. We're specifically interested in the <code>cdPrePaint</code> stage for the header.</li>
<li><strong>Draw the Unused Space:</strong> If the <code>DrawStage</code> indicates that the header is being drawn, we can calculate the unused space as we did before and fill it with our desired color using the ListView's <code>Canvas</code> property.</li>
<li><strong>Let Default Drawing Handle Columns:</strong> We can then allow the default drawing mechanism to handle the individual column headers, or we can customize them further using the <code>OnDrawColumnHeader</code> event if needed.</li>
</ol>
</li>
</ul>
<p>This approach can be useful if you want to customize the overall look of the ListView, including the header and other elements, in a single place. It also allows you to combine custom drawing for the unused space with the default or customized drawing of individual column headers.</p>
<h2>Choosing the Right Approach</h2>
<p>So, which method should you choose? Here's a quick summary to help you decide:</p>
<ul>
<li><strong>Owner-Draw:</strong> Great for fine-grained control over individual column headers and the unused space. It's relatively straightforward to implement and understand.</li>
<li><strong>Window Subclassing:</strong> Offers more robust control and potentially better performance, but it's more complex to implement and requires a deeper understanding of Windows messaging.</li>
<li><strong>Hybrid Approach:</strong> A good balance between control and simplicity, allowing you to customize the overall look of the ListView while still leveraging default drawing for specific elements.</li>
</ul>
<p>Ultimately, the best approach depends on your specific needs and the complexity of your customization requirements. Start with the simplest method that meets your needs, and only move to more complex techniques if necessary.</p>
<h2>Best Practices and Considerations</h2>
<p>Before you start coloring everything in sight, let's discuss some best practices and considerations:</p>
<ul>
<li><strong>Accessibility:</strong> Ensure your color choices provide sufficient contrast for readability. Avoid using color combinations that may be difficult for users with visual impairments to distinguish.</li>
<li><strong>Consistency:</strong> Maintain a consistent color scheme throughout your application. This creates a professional and user-friendly experience.</li>
<li><strong>Performance:</strong> Be mindful of the performance impact of custom drawing. Complex drawing routines can slow down your application, especially with large ListViews. Optimize your code and avoid unnecessary drawing operations.</li>
<li><strong>VCL Styles:</strong> While we focused on methods without VCL Styles, keep in mind that VCL Styles offer a simpler way to customize the look and feel of your application. If you're not opposed to using styles, they might be a better option for some scenarios.</li>
</ul>
<h2>Conclusion</h2>
<p>There you have it! We've explored several techniques for coloring TListView column headers and that elusive unused space. From the versatile owner-draw method to the powerful window subclassing, you now have the tools to create visually stunning and user-friendly ListViews in your Delphi applications. Remember to consider accessibility, consistency, and performance when implementing your custom coloring schemes. So go ahead, unleash your creativity, and make your ListViews pop!</p>
<h2>Keywords</h2>
<p><strong>Delphi ListView</strong>, <strong>color column headers</strong>, <strong>TListView header color</strong>, <strong>Delphi owner-draw</strong>, <strong>window subclassing</strong>, <strong>ListView unused space</strong>, <strong>custom ListView</strong>, <strong>Delphi UI design</strong>, <strong>VCL Styles</strong>, <strong>ListView customization</strong></p>

                    </div>
                    <aside class="related-posts">
                        <div class="ad-sidebar container">
                            <!-- <div class="ad-wrapper">
    <span>Iklan Related</span>
</div> -->
                        </div>
                        <h2 class="related-posts-title">Related Posts</h2><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/dell-latitude-3310-fix-legacy">Dell Latitude 3310: Fix Legacy Boot Not Working</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-08T08:40:01+00:00">Aug 8, 2025</time>
		                        <span class="view-count">
									47 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/greenboot-and-systemd-boost-your">Greenboot &amp; Systemd: Boost Your System Management</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-11T13:22:33+00:00">Aug 11, 2025</time>
		                        <span class="view-count">
									49 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/necessity-defense-trespassing-on-private">Necessity Defense Trespassing On Private Property</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-21T17:28:29+00:00">Jul 21, 2025</time>
		                        <span class="view-count">
									49 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/fix-print-spooler-not-running">Fix: Print Spooler Not Running In Windows 11</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-11T13:38:17+00:00">Aug 11, 2025</time>
		                        <span class="view-count">
									44 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/master-your-mornings-a-guide">Master Your Mornings: A Guide To Building A Routine</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-04T07:11:40+00:00">Aug 4, 2025</time>
		                        <span class="view-count">
									51 views
		                        </span>
                            </div>
                        </article>
                    </aside>
                    <aside class="related-posts"></aside>
                </div>
            </div>
        </article>
        <a href="#" class="back-to-top" id="backToTop" title="Back to top">
        	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-bar-up" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M3.646 11.854a.5.5 0 0 0 .708 0L8 8.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708M2.4 5.2c0 .22.18.4.4.4h10.4a.4.4 0 0 0 0-.8H2.8a.4.4 0 0 0-.4.4"/>
			</svg>
		</a>
    </main>
    <footer class="footer">
        <div class="container">
            <p>© 2025 Question Notes</p>
        </div>
    </footer>
    <script>
    	(() => {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const toggleMenu = () => {
                navMenu.classList.toggle('nav-menu-active');
                navToggle.classList.toggle('nav-toggle-active');
            };
            const backToTopHandler = (e) => {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            navToggle.addEventListener('click', toggleMenu);
            document.getElementById('backToTop').addEventListener('click', backToTopHandler);
            window.addEventListener('pagehide', () => {
                navToggle.removeEventListener('click', toggleMenu);
                document.getElementById('backToTop').removeEventListener('click', backToTopHandler);
            });
        })();
		(() => {
            window.addEventListener("DOMContentLoaded", (event) => {
                const ellHljs = document.createElement("script");
                ellHljs.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js");
                ellHljs.onload = () => {
                    hljs.highlightAll();
                };
                document.querySelector("body").append(ellHljs);
                const ellFont = document.createElement("link");
                ellFont.setAttribute("href", "https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css");
                ellFont.setAttribute("rel", "stylesheet");
                document.querySelector("head").append(ellFont);
                window.addEventListener('pagehide', () => {
                    // ellHljs.remove();
                    ellFont.remove();
                });

            });
        })();
    </script>
    <!-- Histats.com  START  (aync)-->
<script type="text/javascript">var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,4957095,4,0,0,0,00010000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
hs.src = ('//s10.histats.com/js15_as.js');
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
})();</script>
<!-- Histats.com  END  -->
    
    
</body>
</html>