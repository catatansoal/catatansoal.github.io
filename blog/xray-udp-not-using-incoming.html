<!DOCTYPE html>
<html lang="en">
<head>
	<title>Xray: UDP Not Using Incoming IP With SendThrough Origin</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Xray: UDP Not Using Incoming IP With SendThrough Origin...">
    <link rel="canonical" href="https://catatansoal.github.io/blog/xray-udp-not-using-incoming">
	<meta property="og:type" content="article">
	<meta property="og:title" content="Xray: UDP Not Using Incoming IP With SendThrough Origin">
	<meta property="og:description" content="Xray: UDP Not Using Incoming IP With SendThrough Origin...">
	<meta property="og:url" content="https://catatansoal.github.io/blog/xray-udp-not-using-incoming">
	<meta property="og:site_name" content="Question Notes">
	<meta property="article:published_time" content="2025-08-12T11:15:23+00:00">
	<meta property="article:author" content="ADMIN">
    <link rel="preconnect" href="https://cdnjs.cloudflare.com">
    <link rel="preload" as="script" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js">
    <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css">
    <link rel="preload" fetchpriority="high" as="image" href="https://tse4.mm.bing.net/th?q=SendThrough%20with%20Origin%3A%20UDP%20Not%20Using%20Incoming%20IP%20-%20Discussion">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
    <style type="text/css">
    	:root{--primary-color:#3740ff;--text-color:#202124;--background-color:#ffffff;--gray-100:#f8f9fa;--gray-200:#e9ecef}*{margin:0;padding:0;box-sizing:border-box}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen-Sans,Ubuntu,Cantarell,"Helvetica Neue",sans-serif;line-height:1.6;color:var(--text-color);background-color:var(--background-color)}.container{max-width:1200px;margin:0 auto;padding:0 1.5rem}.header{background-color:var(--background-color);border-bottom:1px solid var(--gray-200);position:sticky;top:0;z-index:100}.nav{padding:.5rem 0}.nav-container{display:flex;justify-content:space-between;align-items:center;gap:1rem}.nav-left{display:flex;align-items:center;flex-shrink:0}.logo{font-weight:700;color:var(--primary-color)}.blog-tag{margin-left:1rem;padding:.25rem .5rem;background-color:var(--gray-100);border-radius:4px;font-size:.875rem}.nav-search{flex-grow:1;max-width:300px}.search-form{position:relative;width:100%}.search-input{width:100%;padding:.5rem 2.5rem .5rem 1rem;border:1px solid var(--gray-200);border-radius:24px;font-size:.875rem;transition:all 0.2s}.search-input:focus{outline:none;border-color:var(--primary-color);box-shadow:0 0 0 2px rgb(55 64 255 / .1)}.search-button{position:absolute;right:.5rem;top:50%;transform:translateY(-50%);background:none;border:none;color:#5f6368;cursor:pointer;padding:.25rem;display:flex;align-items:center;justify-content:center}.search-button:hover{color:var(--primary-color)}.nav-toggle{display:none;background:none;border:none;cursor:pointer;padding:.5rem}.hamburger{display:block;position:relative;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before,.hamburger::after{content:'';position:absolute;width:24px;height:2px;background:var(--text-color);transition:all 0.3s}.hamburger::before{top:-6px}.hamburger::after{bottom:-6px}.nav-toggle-active .hamburger{background:#fff0}.nav-toggle-active .hamburger::before{transform:rotate(45deg);top:0}.nav-toggle-active .hamburger::after{transform:rotate(-45deg);bottom:0}.nav-list{display:flex;list-style:none;gap:2rem}.nav-link{color:var(--text-color);text-decoration:none;font-size:.9rem;transition:color 0.2s}.nav-link:hover{color:var(--primary-color)}.article-header{padding:2rem 0;background-color:var(--gray-100)}.article-layout{display:grid;grid-template-columns:1fr 350px;gap:3rem;padding:1rem 0;align-items: start}h1,h2,h3,h4,h5,h6{font-family:"Crimson Text","Times New Roman",Times,serif}h1{font-size:2.5rem;line-height:1.2;margin-bottom:1rem}.meta{color:#5f6368;font-size:.875rem;display:flex;align-items:center;gap:1rem;flex-wrap:wrap}.view-count{display:inline-flex;align-items:center;gap:.25rem}.view-count svg{color:#5f6368}.content{min-width:0;border-bottom:1px solid #dddddd5e;margin-top:1rem;white-space:pre-line !important;overflow-wrap:break-word;overflow-x:auto;word-break:break-word}.lead{font-size:1.25rem;color:#5f6368;margin-bottom:2rem}h2,h3,h4,h5,h6{font-size:1.75rem;margin:1rem 0 1rem}p,pre,ol,ul>li{margin-bottom:1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;font-size:1.3rem;text-align: justify;}p>code{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px}hr{margin:1rem 0 1rem 0}.code-example{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;margin:1.5rem 0;overflow-x:auto}code{font-family:'Roboto Mono',monospace;font-size:.875rem}ul{margin:.2rem 0;padding-left:1.5rem}.related-posts{background-color:var(--gray-100);padding:1.5rem;border-radius:8px;position:sticky;top:5rem}.related-posts-title,.newpost-posts-list{font-size:1.75rem;margin:0 0 1rem}.related-posts-list{display:flex;flex-direction:column;gap:.5rem}.related-post,.newpost-post{border-bottom:1px solid #ddd;padding-bottom:10px;margin-bottom:10px}.related-post:last-child,.newpost-post:last-child{padding-bottom:0;border-bottom:none}.related-post-title,.newpost-post-title{font-size:1.2rem;margin:0 0 .1rem;font-family:"Newsreader",serif;font-optical-sizing:auto;font-style:normal;display: -webkit-box;-webkit-line-clamp: 3;-webkit-box-orient: vertical;overflow: hidden;}.related-post-title a,.newpost-post-title a{color:var(--text-color);text-decoration:none;transition:color 0.2s}.related-post-title a:hover,.newpost-post-title a:hover{color:var(--primary-color)}.related-post time{font-size:.875rem;color:#5f6368}.footer{background-color:var(--gray-100);padding:2rem 0;margin-top:4rem;color:#5f6368;font-size:.875rem}.nav-menu>ul>li{margin-bottom:0}@media (max-width:1024px){.container{max-width:800px}.article-layout{grid-template-columns:1fr;gap:2rem}.related-posts{position:static}}@media (max-width:768px){.nav-container{flex-wrap:wrap}.nav-search{order:3;max-width:none;width:100%;margin-top:.1rem}.nav-toggle{display:block}.nav-menu{display:none;position:absolute;top:100%;left:0;right:0;background:var(--background-color);padding:1rem 0;border-bottom:1px solid var(--gray-200)}.nav-menu-active{display:block}.nav-list{flex-direction:column;gap:.1rem;padding:0 1.5rem}.nav-link{display:block;padding:.2rem 0}h1{font-size:2rem}.article-header{padding:2rem 0}.content{padding:.1rem 0}}table{width:100%;border-collapse:collapse;margin:20px 0;font-family:'Arial',sans-serif}th,td{padding:12px 15px;text-align:left;border:1px solid #ddd}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9}tr:nth-child(even) td{background-color:#f2f2f2}@media screen and (max-width:768px){table{border:0;display:block;overflow-x:auto;white-space:nowrap}th,td{padding:10px;text-align:right}th{background-color:#0F7F0B;color:#FFF}td{background-color:#f9f9f9;border-bottom:1px solid #ddd}tr:nth-child(even) td{background-color:#f2f2f2}}a{text-decoration:none;color:#540707}.katex-html{padding: .2rem;color: #000;font-weight: 700;font-size: 1.3rem;overflow-wrap: break-word;max-width: 100%;white-space: normal !important}.category{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap;margin:1rem 0 1rem 0}.tag{font-size:1rem;font-weight:700;padding:.1rem .3rem .1rem .3rem;background:#0000000f;color:#000;border-radius:5px;font-family:"Newsreader",serif}.tag>a{text-decoration:none;color:#000}img{margin:auto;display:block;max-width:100%;height:auto;margin-bottom:1rem}.katex{white-space: pre-line !important;display: inline-block;max-width: 100%;overflow-x: auto;overflow-y: hidden;scrollbar-width: thin;overflow-wrap: break-word;word-break: break-word;vertical-align: -7px}.content > p {overflow-wrap: break-word;word-break: break-word}
    </style>
    <style type="text/css">
    	pre code.hljs{display:block;overflow-x:auto;padding:1em}code.hljs{padding:3px 5px}
		.hljs{color:#c9d1d9;background:#0d1117}.hljs-doctag,.hljs-keyword,.hljs-meta .hljs-keyword,.hljs-template-tag,.hljs-template-variable,.hljs-type,.hljs-variable.language_{color:#ff7b72}.hljs-title,.hljs-title.class_,.hljs-title.class_.inherited__,.hljs-title.function_{color:#d2a8ff}.hljs-attr,.hljs-attribute,.hljs-literal,.hljs-meta,.hljs-number,.hljs-operator,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-id,.hljs-variable{color:#79c0ff}.hljs-meta .hljs-string,.hljs-regexp,.hljs-string{color:#a5d6ff}.hljs-built_in,.hljs-symbol{color:#ffa657}.hljs-code,.hljs-comment,.hljs-formula{color:#8b949e}.hljs-name,.hljs-quote,.hljs-selector-pseudo,.hljs-selector-tag{color:#7ee787}.hljs-subst{color:#c9d1d9}.hljs-section{color:#1f6feb;font-weight:700}.hljs-bullet{color:#f2cc60}.hljs-emphasis{color:#c9d1d9;font-style:italic}.hljs-strong{color:#c9d1d9;font-weight:700}.hljs-addition{color:#aff5b4;background-color:#033a16}.hljs-deletion{color:#ffdcd7;background-color:#67060c}
    	pre{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;font-weight:400;word-break:break-word;word-wrap:break-word;box-sizing:inherit;border-radius:4px;overflow-x:auto;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}code{-webkit-text-size-adjust:100%;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;word-wrap:break-word;word-break:break-word;font-style:normal;line-height:20px;letter-spacing:-.003em;box-sizing:inherit;font-weight:400;font-size:75%;font-family:source-code-pro,Menlo,Monaco,"Courier New",Courier,monospace}
    </style>
    <style type="text/css">
    	.back-to-top{position:fixed;bottom:20px;right:20px;background-color:#a73f3f;color:#fff;padding:8px 10px;border-radius:50%;box-shadow:0 4px 6px rgb(0 0 0 / .2);font-size:10px;font-weight:700;text-decoration:none;text-align:center;transition:opacity 0.3s ease,visibility 0.3s ease;z-index:99999;opacity:1;visibility:visible}.back-to-top:hover{background-color:#0056b3}
    </style>
    <style type="text/css">
        .ad-header {margin: 1rem auto 1rem;background-color: #fdfdfd;text-align: center;display: block;}.ad-header .ad-wrapper {min-height: 90px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #555;font-weight: 500;padding: 3rem;border: 1px dashed #ccc;border-radius: 6px;}@media (max-width: 768px) {.ad-header {padding: 0.75rem;}}.ad-sidebar {margin: 0 0 1rem;background-color: #fefefe;text-align: center;padding: 0px;width: 100%;max-width: 100%;display: block;}.ad-sidebar .ad-wrapper {min-height: 250px;display: flex;align-items: center;justify-content: center;font-size: 1rem;color: #444;font-weight: 500;border: 1px dashed #aaa;border-radius: 6px;padding: 0rem;}@media (max-width: 1024px) {.ad-sidebar {padding: 0.75rem;}}
    </style>
    <script type="application/ld+json">
        {
          "@context": "https://schema.org",
          "@type": "Article",
          "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://catatansoal.github.io/blog/xray-udp-not-using-incoming"
          },
          "headline": "Xray: UDP Not Using Incoming IP With SendThrough Origin",
          "description": "Xray: UDP Not Using Incoming IP With SendThrough Origin...",
          "image": [
            "https://tse4.mm.bing.net/th?q=SendThrough%20with%20Origin%3A%20UDP%20Not%20Using%20Incoming%20IP%20-%20Discussion"
          ],
          "author": {
            "@type": "Person",
            "name": "ADMIN",
            "jobTitle": "Editor web"
          },
          "publisher": {
            "@type": "Organization",
            "name": "Question Notes",
            "logo": {
              "@type": "ImageObject",
              "url": "https://tse4.mm.bing.net/th?q=Question%20Notes"
            }
          },
          "datePublished": "2025-08-12T11:15:23+00:00",
          "dateModified": "2025-08-12T11:15:23+00:00"
        }
    </script>
</head>
<body>
    <header class="header">
        <nav class="nav">
            <div class="container nav-container">
                <div class="nav-left">
                    <span class="logo">Question Notes</span>
                    <span class="blog-tag">Article</span>
                </div>
                <div class="nav-search">
                    <form class="search-form" role="search">
                        <input 
                            type="search" 
                            class="search-input"
                            placeholder="Search articles..."
                            aria-label="Search articles"
                        >
                        <button type="submit" class="search-button" aria-label="Submit search">ðŸ”Ž</button>
                    </form>
                </div>
                <button class="nav-toggle" aria-label="Toggle navigation">
                    <span class="hamburger"></span>
                </button>
                <div class="nav-menu">
                    <ul class="nav-list">
                    	<li><a href="/" class="nav-link">HOME</a></li>
                        <li><a href="/pages/About" class="nav-link">About</a></li>
                        <li><a href="/pages/Contact" class="nav-link">Contact</a></li>
                        <li><a href="/pages/Disclaimer" class="nav-link">Disclaimer</a></li>
                        <li><a href="/pages/Privacy" class="nav-link">Privacy</a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>
    <main class="main">
        <article class="article">
            <header class="article-header">
                <div class="container">
                    <h1>Xray: UDP Not Using Incoming IP With SendThrough Origin</h1>
                    <div class="meta">
                        <time datetime="2025-08-12T11:15:23+00:00">Aug 12, 2025</time>
                        <span class="author">by ADMIN</span>
                        <span class="view-count">
                            <span id="viewCount">56</span> views
                        </span>
                    </div>
                </div>
            </header>
            <div class="ad-header container">
                <!-- <div class="ad-wrapper">
    Iklan Headers
</div> -->
            </div>
            <div class="container">
                <div class="article-layout">
                    <div class="content">
                        <img src="https://tse4.mm.bing.net/th?q=SendThrough%20with%20Origin%3A%20UDP%20Not%20Using%20Incoming%20IP%20-%20Discussion" title="SendThrough with Origin: UDP Not Using Incoming IP - Discussion" width="300" height="200"/><p>Hey guys,</p>
<p>So, we've got an interesting issue to dive into today regarding Xray-core and how it handles UDP traffic when using the <code>sendThrough: origin</code> setting. It seems like there's a bit of a discrepancy between TCP and UDP behavior, and we're here to break it down and see if we can figure out what's going on.</p>
<h2>The Problem: UDP's Preference for the Main IP</h2>
<p>In a multi-IP server setup, when you configure your Xray outbound to use <code>freedom</code> with <code>sendThrough: origin</code>, you'd expect the traffic to originate from the IP address that the connection came in on, right? Well, that's exactly what happens with TCP connections. However, it appears that UDP connections stubbornly stick to the server's main IP, which isn't the behavior we're after.</p>
<p>This can be a real headache, especially if you're trying to leverage a range of IPs for various purposes or need UDP traffic to appear as if it's coming from a specific IP within your block. Let's dig into how this issue was reproduced and the configurations involved.</p>
<h3>Reproducing the Issue: A Step-by-Step Guide</h3>
<p>To get a clear picture of the problem, hereâ€™s how it was reproduced:</p>
<ol>
<li><strong>Setting up the Server</strong>: Imagine a server sitting pretty with a whole /24 subnet of IPs. On this server, Xray is set up with a SOCKS5 inbound, ready to accept connections.</li>
<li><strong>Client Configuration</strong>: On the client side, we've got Clash.Meta running in TUN mode. This is our traffic controller.</li>
<li><strong>Triggering the Traffic</strong>: To test this, the user accessed <a href="https://browserleaks.com/webrtc">https://browserleaks.com/webrtc</a> in a browser. This handy site triggers a STUN request, which is perfect for our UDP test.</li>
<li><strong>Observing the Results</strong>: The TCP traffic, when checked, correctly showed the incoming IP. But the STUN request, our UDP guinea pig, revealed that the traffic was originating from the server's main IP. Bummer!</li>
</ol>
<p>So, you see, the main keyword here is <code>sendThrough: origin</code> and it's crucial to understand its intended function. The goal is for traffic to exit the server via the same IP it entered, maintaining consistency and potentially aiding in traffic management. When UDP fails to adhere to this, it throws a wrench in the works.</p>
<h3>Diving Deeper: Why Does This Matter?</h3>
<p>Why should you care if UDP is using the main IP instead of the incoming IP? There are several scenarios where this behavior can be problematic:</p>
<ul>
<li><strong>IP Reputation</strong>: If your main IP gets flagged for any reason, all your UDP traffic is affected. Spreading traffic across multiple IPs can help mitigate this risk.</li>
<li><strong>Geo-location</strong>: Services might detect the wrong location if UDP traffic is always coming from the main IP.</li>
<li><strong>Load Balancing</strong>: Distributing traffic across multiple IPs can help balance the load and improve performance. If UDP is stuck on one IP, it can create a bottleneck.</li>
<li><strong>Bypassing Restrictions</strong>: In some cases, using different IPs can help bypass network restrictions or firewalls. If UDP is limited to the main IP, it loses this advantage.</li>
</ul>
<p>Understanding these implications is vital. Itâ€™s not just about a technical glitch; itâ€™s about how your network performs and how effectively you can manage your traffic. Thatâ€™s why getting this <code>sendThrough: origin</code> behavior right for UDP is so important.</p>
<h2>Configuration Details: Peeking Under the Hood</h2>
<p>Let's take a closer look at the configurations used in this scenario. This will give us a clearer understanding of how Xray is set up and where the potential issue might lie.</p>
<h3>Server-Side Configuration</h3>
<p>The server-side configuration is the heart of the matter. It dictates how Xray handles traffic, so let's dissect the provided JSON configuration:</p>
<pre><code class="hljs">{
    &quot;log&quot;: {
        &quot;loglevel&quot;: &quot;warning&quot;,
        &quot;access&quot;: &quot;/var/log/xray/access.log&quot;,
        &quot;error&quot;: &quot;/var/log/xray/error.log&quot;
    },
    &quot;inbounds&quot;: [
        {
            &quot;port&quot;: 8888,
            &quot;listen&quot;: &quot;0.0.0.0&quot;,
            &quot;protocol&quot;: &quot;socks&quot;,
            &quot;tag&quot;: &quot;socks-in&quot;,
            &quot;settings&quot;: {
                &quot;auth&quot;: &quot;password&quot;,
                &quot;accounts&quot;: [
                    {
                        &quot;user&quot;: &quot;123456&quot;,
                        &quot;pass&quot;: &quot;123456&quot;
                    }
                ],
                &quot;udp&quot;: true
            },
            &quot;sniffing&quot;: {
                &quot;enabled&quot;: false
            }
        }
    ],
    &quot;outbounds&quot;: [
        {
            &quot;protocol&quot;: &quot;freedom&quot;,
            &quot;tag&quot;: &quot;out&quot;,
            &quot;sendThrough&quot;: &quot;origin&quot;
        }
    ]
}
</code></pre>
<ul>
<li><strong>Logs</strong>: The log settings are straightforward, setting the log level to <code>warning</code> and specifying the access and error log files. These logs are crucial for diagnosing issues, so it's good practice to have them configured properly.</li>
<li><strong>Inbounds</strong>: This section defines how Xray receives traffic. Here, we have a single SOCKS5 inbound:
<ul>
<li><code>port</code>: 8888 - The port on which the SOCKS5 proxy is listening.</li>
<li><code>listen</code>: <code>0.0.0.0</code> - This means the proxy is listening on all interfaces, which is common for a server setup.</li>
<li><code>protocol</code>: <code>socks</code> - We're using the SOCKS5 protocol.</li>
<li><code>tag</code>: <code>socks-in</code> - A tag to identify this inbound, useful for routing rules.</li>
<li><code>settings</code>: This is where the SOCKS5 authentication is configured:
<ul>
<li><code>auth</code>: <code>password</code> - We're using username/password authentication.</li>
<li><code>accounts</code>: A single user account with the username <code>123456</code> and password <code>123456</code>. <strong>(Note:</strong> In a production environment, you'd want to use stronger credentials!)</li>
<li><code>udp</code>: <code>true</code> - UDP support is enabled for this inbound.</li>
</ul>
</li>
<li><code>sniffing</code>: <code>enabled: false</code> - Sniffing is disabled, which means Xray won't try to automatically detect the protocol of the traffic.</li>
</ul>
</li>
<li><strong>Outbounds</strong>: This section defines how Xray sends traffic. Here, we have a single outbound:
<ul>
<li><code>protocol</code>: <code>freedom</code> - The <code>freedom</code> protocol allows Xray to directly connect to the destination.</li>
<li><code>tag</code>: <code>out</code> - A tag to identify this outbound.</li>
<li><code>sendThrough</code>: <code>origin</code> - This is the <strong>key setting</strong> we're focusing on. It tells Xray to send traffic through the IP address that the inbound connection originated from.</li>
</ul>
</li>
</ul>
<p>This configuration looks pretty standard. The crucial part is the <code>sendThrough: origin</code> setting in the outbound, which should, in theory, ensure that UDP traffic uses the incoming IP. But as we've seen, that's not happening.</p>
<h3>Client-Side Configuration</h3>
<p>The client-side configuration wasn't explicitly provided, but we know that Clash.Meta is being used in TUN mode. This setup essentially creates a virtual network interface on the client, and all traffic is routed through Clash.Meta, which then uses the Xray proxy to connect to the internet. The main keyword here is TUN mode, which gives Clash.Meta a high degree of control over network traffic.</p>
<p>The fact that TCP traffic behaves as expected suggests that the client-side setup is generally working correctly. The issue seems to be specifically related to how Xray handles UDP traffic with the <code>sendThrough: origin</code> setting.</p>
<h3>Log Analysis: Tracing the Traffic</h3>
<p>Logs are our best friends when troubleshooting network issues. They give us a peek into what's happening behind the scenes. Let's examine the provided client and server logs to see if we can spot any clues.</p>
<h4>Client Logs</h4>
<p>The client logs show the following:</p>
<pre><code class="hljs">3019.18:57:22info[UDP] 198.18.0.1:50424 --&gt; stun.l.google.com:19302 using GLOBAL
3008.18:57:22debug[DNS] cache hit stun.l.google.com --&gt; [74.125.250.129] A, expire at 2025-08-12 18:58:54
</code></pre>
<p>This log snippet tells us that the client is sending a UDP packet from <code>198.18.0.1:50424</code> to <code>stun.l.google.com:19302</code>. The <code>using GLOBAL</code> part likely refers to the outbound routing strategy on the client side. However, this log doesn't directly tell us which IP the server is using to send the response.</p>
<h4>Server Logs</h4>
<p>The server logs provide more valuable information:</p>
<pre><code class="hljs">2025/08/12 06:57:20.846421 from udp:160.22.143.147:36117 accepted udp:74.125.250.129:19302 [socks-in &gt;&gt; out]
</code></pre>
<p>This log line is crucial. It shows that the server received a UDP packet from <code>160.22.143.147:36117</code> destined for <code>74.125.250.129:19302</code> (which is a STUN server). The <code>[socks-in &gt;&gt; out]</code> indicates that the traffic is being routed from the <code>socks-in</code> inbound to the <code>out</code> outbound.</p>
<p><strong>The key takeaway here is that the server is using its main IP to send the UDP traffic, despite the <code>sendThrough: origin</code> setting.</strong> This confirms the issue we're investigating.</p>
<h3>Potential Causes and Next Steps</h3>
<p>So, why is UDP ignoring the <code>sendThrough: origin</code> setting? Here are a few potential causes:</p>
<ol>
<li><strong>Xray Bug</strong>: There might be a bug in Xray's handling of UDP traffic with <code>sendThrough: origin</code>. This is a possibility that needs to be investigated by the Xray developers.</li>
<li><strong>Firewall/Routing Issues</strong>: It's possible that the server's firewall or routing configuration is interfering with Xray's ability to use the incoming IP for UDP traffic.</li>
<li><strong>Operating System Limitations</strong>: Some operating systems might have limitations on binding UDP sockets to specific IP addresses.</li>
</ol>
<p>To further troubleshoot this issue, here are some steps we can take:</p>
<ol>
<li><strong>Test with Different UDP Applications</strong>: Try using other UDP-based applications (e.g., a simple UDP echo server) to see if the issue is specific to STUN or a more general problem.</li>
<li><strong>Check Firewall and Routing Rules</strong>: Review the server's firewall and routing rules to ensure they're not interfering with Xray's traffic.</li>
<li><strong>Experiment with Different Xray Versions</strong>: Try using different versions of Xray to see if the issue is version-specific.</li>
<li><strong>Consult Xray Documentation and Community</strong>: Check the Xray documentation and community forums for any similar issues or known workarounds.</li>
</ol>
<p>By systematically investigating these potential causes, we can hopefully pinpoint the root of the problem and find a solution.</p>
<h2>Conclusion: Cracking the UDP Mystery</h2>
<p>In conclusion, the issue of UDP traffic not adhering to the <code>sendThrough: origin</code> setting in Xray-core is a significant one, especially in multi-IP server environments. Understanding the configurations, analyzing the logs, and systematically exploring potential causes are crucial steps in resolving this problem.</p>
<p>By continuing to investigate and share our findings, we can help ensure that Xray-core functions as expected and provides the flexibility and control we need over our network traffic. Let's keep digging, guys, and get this UDP mystery cracked!</p>

                    </div>
                    <aside class="related-posts">
                        <div class="ad-sidebar container">
                            <!-- <div class="ad-wrapper">
    <span>Iklan Related</span>
</div> -->
                        </div>
                        <h2 class="related-posts-title">Related Posts</h2><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/fixing-key-features-cut-off">Fixing Key Features Cut Off On Small Screens</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-01T12:14:46+00:00">Aug 1, 2025</time>
		                        <span class="view-count">
									44 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/solving-matrix-equations-a-step">Solving Matrix Equations: A Step-by-Step Guide</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-06T15:24:35+00:00">Aug 6, 2025</time>
		                        <span class="view-count">
									46 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/miscarriage-signs-how-to-recognize">Miscarriage Signs: How To Recognize &amp; What To Do</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-08-03T06:38:11+00:00">Aug 3, 2025</time>
		                        <span class="view-count">
									48 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/main-takeaway-from-dont-dribble">Main Takeaway From Don&#39;t Dribble Too Long, Take The Shot</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-17T08:10:11+00:00">Jul 17, 2025</time>
		                        <span class="view-count">
									56 views
		                        </span>
                            </div>
                        </article><article class="related-post">
                            <h3 class="related-post-title">
                                <a href="https://catatansoal.github.io/blog/double-click-patient-name-for">Double-Click Patient Name For Encounter A Time-Saving Tip</a>
                            </h3>
                            <div class="meta">
                            	<time datetime="2025-07-13T19:15:27+00:00">Jul 13, 2025</time>
		                        <span class="view-count">
									57 views
		                        </span>
                            </div>
                        </article>
                    </aside>
                    <aside class="related-posts"></aside>
                </div>
            </div>
        </article>
        <a href="#" class="back-to-top" id="backToTop" title="Back to top">
        	<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-bar-up" viewBox="0 0 16 16">
			  <path fill-rule="evenodd" d="M3.646 11.854a.5.5 0 0 0 .708 0L8 8.207l3.646 3.647a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 0 0 0 .708M2.4 5.2c0 .22.18.4.4.4h10.4a.4.4 0 0 0 0-.8H2.8a.4.4 0 0 0-.4.4"/>
			</svg>
		</a>
    </main>
    <footer class="footer">
        <div class="container">
            <p>Â© 2025 Question Notes</p>
        </div>
    </footer>
    <script>
    	(() => {
            const navToggle = document.querySelector('.nav-toggle');
            const navMenu = document.querySelector('.nav-menu');
            const toggleMenu = () => {
                navMenu.classList.toggle('nav-menu-active');
                navToggle.classList.toggle('nav-toggle-active');
            };
            const backToTopHandler = (e) => {
                e.preventDefault();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            };
            navToggle.addEventListener('click', toggleMenu);
            document.getElementById('backToTop').addEventListener('click', backToTopHandler);
            window.addEventListener('pagehide', () => {
                navToggle.removeEventListener('click', toggleMenu);
                document.getElementById('backToTop').removeEventListener('click', backToTopHandler);
            });
        })();
		(() => {
            window.addEventListener("DOMContentLoaded", (event) => {
                const ellHljs = document.createElement("script");
                ellHljs.setAttribute("src", "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.11.1/highlight.min.js");
                ellHljs.onload = () => {
                    hljs.highlightAll();
                };
                document.querySelector("body").append(ellHljs);
                const ellFont = document.createElement("link");
                ellFont.setAttribute("href", "https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css");
                ellFont.setAttribute("rel", "stylesheet");
                document.querySelector("head").append(ellFont);
                window.addEventListener('pagehide', () => {
                    // ellHljs.remove();
                    ellFont.remove();
                });

            });
        })();
    </script>
    <!-- Histats.com  START  (aync)-->
<script type="text/javascript">var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,4957095,4,0,0,0,00010000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
hs.src = ('//s10.histats.com/js15_as.js');
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
})();</script>
<!-- Histats.com  END  -->
    
    
</body>
</html>